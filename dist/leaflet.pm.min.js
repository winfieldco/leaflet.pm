!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17)}([function(e,t,r){"use strict";var n=r(10);const i=L.Class.extend({includes:[n.a],options:{snappable:!0,snapDistance:20,cursorMarker:!0,finishOnDoubleClick:!1,finishOn:null,allowSelfIntersection:!0,templineStyle:{},hintlineStyle:{dashArray:"5,5"},markerStyle:{draggable:!0}},initialize(e){this._map=e,this.shapes=["Marker","Line","Poly","Rectangle","Circle","Cut"],this.shapes.forEach(e=>{this[e]=new L.PM.Draw[e](this._map)})},setPathOptions(e){this.options.pathOptions=e},getShapes(){return this.shapes},enable(e,t){if(!e)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[e].enable(t)},disable(){this.shapes.forEach(e=>{this[e].disable()})},addControls(){this.shapes.forEach(e=>{this[e].addButton()})}});t.a=i},function(e,t,r){"use strict";var n=r(10),i=r(38);const o=L.Class.extend({includes:[i.a,n.a],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,draggable:!0},isPolygon(){return this._layer instanceof L.Polygon}});t.a=o},function(e,t,r){var n=r(15)(Object,"create");e.exports=n},function(e,t,r){var n=r(71);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(77);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t,r){"use strict";function n(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function i(e,t,r){return void 0===r&&(r={}),n({type:"Point",coordinates:e},t,r)}function o(e,t,r){void 0===r&&(r={});for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,r)}function a(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,r)}function s(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function l(e,t,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:e},t,r)}function h(e,t,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:e},t,r)}function u(e,t,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:e},t,r)}function p(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function c(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function d(e){return 180*(e%(2*Math.PI))/Math.PI}function f(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return i(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return h(t).geometry;case"MultiLineString":return l(t).geometry;case"MultiPolygon":return u(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return i(e,t)}),r)},t.polygon=o,t.polygons=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return o(e,t)}),r)},t.lineString=a,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return a(e,t)}),r)},t.featureCollection=s,t.multiLineString=l,t.multiPoint=h,t.multiPolygon=u,t.geometryCollection=function(e,t,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:e},t,r)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=p,t.lengthToRadians=c,t.lengthToDegrees=function(e,t){return d(c(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=d,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return p(c(e,t),r)},t.convertArea=function(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[r];if(!i)throw new Error("invalid original units");var o=t.areaFactors[n];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=f,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!f(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var n=r(14),i=r(50),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&n(e)==o}},function(e,t,r){var n=r(9).Symbol;e.exports=n},function(e,t,r){var n=r(46),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},function(e,t,r){"use strict";const n={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_assignEvents(e){e.forEach(e=>{Array.isArray(e)?this._assignEvents(e):(e.off("drag",this._handleSnapping,this),e.on("drag",this._handleSnapping,this),e.off("dragend",this._cleanupSnapping,this),e.on("dragend",this._cleanupSnapping,this))})},_unsnap(){delete this._snapLatLng},_cleanupSnapping(){delete this._snapList,this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(e=>{e.remove()})},_handleSnapLayerRemoval({layer:e}){const t=this._snapList.findIndex(t=>t._leaflet_id===e._leaflet_id);this._snapList.splice(t,1)},_handleSnapping(e){if(e.originalEvent.altKey)return!1;if(this._snapList===undefined&&this._createSnapList(e),this._snapList.length<=0)return!1;const t=e.target,r=this._calcClosestLayer(t.getLatLng(),this._snapList),n=r.layer instanceof L.Marker||r.layer instanceof L.CircleMarker;let i;i=n?r.latlng:this._checkPrioritiySnapping(r);const o=this.options.snapDistance,a={marker:t,snapLatLng:i,segment:r.segment,layer:this._layer,layerInteractedWith:r.layer};if(r.distance<o){t.setLatLng(i),t._snapped=!0;const e=()=>{this._snapLatLng=i,t.fire("pm:snap",a),this._layer.fire("pm:snap",a)},r=this._snapLatLng||{},n=i||{};r.lat===n.lat&&r.lng===n.lng||e()}else this._snapLatLng&&(this._unsnap(a),t._snapped=!1,a.marker.fire("pm:unsnap",a),this._layer.fire("pm:unsnap",a));return!0},_checkPrioritiySnapping(e){const t=this._map,r=e.segment[0],n=e.segment[1],i=e.latlng,o=this._getDistance(t,r,i),a=this._getDistance(t,n,i),s=o<a?r:n;let l;return l=(o<a?o:a)<this.options.snapDistance?s:i,Object.assign({},l)},_createSnapList(){let e=[];const t=[],r=this._map;r.off("pm:remove",this._handleSnapLayerRemoval,this),r.on("pm:remove",this._handleSnapLayerRemoval,this),r.eachLayer(r=>{if(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.CircleMarker){e.push(r);const n=L.polyline([],{color:"red",pmIgnore:!0});t.push(n)}}),e=(e=(e=e.filter(e=>this._layer!==e)).filter(e=>e._latlng||e._latlngs&&e._latlngs.length>0)).filter(e=>!e._pmTempLayer),this._otherSnapLayers?this._snapList=e.concat(this._otherSnapLayers):this._snapList=e,this.debugIndicatorLines=t},_calcClosestLayer(e,t){let r={};return t.forEach((t,n)=>{const i=this._calcLayerDistances(e,t);this.debugIndicatorLines[n].setLatLngs([e,i.latlng]),(r.distance===undefined||i.distance<r.distance)&&((r=i).layer=t)}),r},_calcLayerDistances(e,t){const r=this._map,n=t instanceof L.Marker||t instanceof L.CircleMarker,i=t instanceof L.Polygon,o=e,a=n?t.getLatLng():t.getLatLngs();if(n)return{latlng:Object.assign({},a),distance:this._getDistance(r,a,o)};let s,l;const h=e=>{e.forEach((t,n)=>{if(Array.isArray(t))return void h(t);const a=t;let u;u=i?n+1===e.length?0:n+1:n+1===e.length?undefined:n+1;const p=e[u];if(p){const e=this._getDistanceToSegment(r,o,a,p);(l===undefined||e<l)&&(l=e,s=[a,p])}})};h(a);const u=this._getClosestPointOnSegment(r,e,s[0],s[1]);return{latlng:Object.assign({},u),segment:s,distance:l}},_getClosestPointOnSegment(e,t,r,n){let i=e.getMaxZoom();i===Infinity&&(i=e.getZoom());const o=e.project(t,i),a=e.project(r,i),s=e.project(n,i),l=L.LineUtil.closestPointOnSegment(o,a,s);return e.unproject(l,i)},_getDistanceToSegment(e,t,r,n){const i=e.latLngToLayerPoint(t),o=e.latLngToLayerPoint(r),a=e.latLngToLayerPoint(n);return L.LineUtil.pointToSegmentDistance(i,o,a)},_getDistance:(e,t,r)=>e.latLngToLayerPoint(t).distanceTo(e.latLngToLayerPoint(r))};t.a=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26);function i(e,t,r,n,i,o,a,s){var l,h,u,p,c={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(l=(s-o)*(r-e)-(a-i)*(n-t))?null!==c.x&&null!==c.y&&c:(p=(r-e)*(h=t-o)-(n-t)*(u=e-i),h=((a-i)*h-(s-o)*u)/l,u=p/l,c.x=e+h*(r-e),c.y=t+h*(n-t),h>=0&&h<=1&&(c.onLine1=!0),u>=0&&u<=1&&(c.onLine2=!0),!(!c.onLine1||!c.onLine2)&&[c.x,c.y])}t["default"]=function(e){var t,r,o={type:"FeatureCollection",features:[]};if("LineString"===(r="Feature"===e.type?e.geometry:e).type)t=[r.coordinates];else if("MultiLineString"===r.type)t=r.coordinates;else if("MultiPolygon"===r.type)t=[].concat.apply([],r.coordinates);else{if("Polygon"!==r.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");t=r.coordinates}return t.forEach(function(e){t.forEach(function(t){for(var r=0;r<e.length-1;r++)for(var a=r;a<t.length-1;a++){if(e===t){if(1===Math.abs(r-a))continue;if(0===r&&a===e.length-2&&e[r][0]===e[e.length-1][0]&&e[r][1]===e[e.length-1][1])continue}var s=i(e[r][0],e[r][1],e[r+1][0],e[r+1][1],t[a][0],t[a][1],t[a+1][0],t[a+1][1]);s&&o.features.push(n.point([s[0],s[1]]))}})}),o}},function(e,t,r){"use strict";function n(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function i(e,t,r){return void 0===r&&(r={}),n({type:"Point",coordinates:e},t,r)}function o(e,t,r){void 0===r&&(r={});for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,r)}function a(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,r)}function s(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function l(e,t,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:e},t,r)}function h(e,t,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:e},t,r)}function u(e,t,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:e},t,r)}function p(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function c(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function d(e){return 180*(e%(2*Math.PI))/Math.PI}function f(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return i(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return h(t).geometry;case"MultiLineString":return l(t).geometry;case"MultiPolygon":return u(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return i(e,t)}),r)},t.polygon=o,t.polygons=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return o(e,t)}),r)},t.lineString=a,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return a(e,t)}),r)},t.featureCollection=s,t.multiLineString=l,t.multiPoint=h,t.multiPolygon=u,t.geometryCollection=function(e,t,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:e},t,r)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=p,t.lengthToRadians=c,t.lengthToDegrees=function(e,t){return d(c(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=d,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return p(c(e,t),r)},t.convertArea=function(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[r];if(!i)throw new Error("invalid original units");var o=t.areaFactors[n];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=f,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!f(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5);function i(e,t,r){if(null!==e)for(var n,o,a,s,l,h,u,p,c=0,d=0,f=e.type,g="FeatureCollection"===f,m="Feature"===f,y=g?e.features.length:1,_=0;_<y;_++){l=(p=!!(u=g?e.features[_].geometry:m?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<l;v++){var b=0,L=0;if(null!==(s=p?u.geometries[v]:u)){h=s.coordinates;var k=s.type;switch(c=!r||"Polygon"!==k&&"MultiPolygon"!==k?0:1,k){case null:break;case"Point":if(!1===t(h,d,_,b,L))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<h.length;n++){if(!1===t(h[n],d,_,b,L))return!1;d++,"MultiPoint"===k&&b++}"LineString"===k&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<h.length;n++){for(o=0;o<h[n].length-c;o++){if(!1===t(h[n][o],d,_,b,L))return!1;d++}"MultiLineString"===k&&b++,"Polygon"===k&&L++}"Polygon"===k&&b++;break;case"MultiPolygon":for(n=0;n<h.length;n++){for(L=0,o=0;o<h[n].length;o++){for(a=0;a<h[n][o].length-c;a++){if(!1===t(h[n][o][a],d,_,b,L))return!1;d++}L++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===i(s.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function s(e,t){var r,n,i,o,a,s,l,h,u,p,c=0,d="FeatureCollection"===e.type,f="Feature"===e.type,g=d?e.features.length:1;for(r=0;r<g;r++){for(s=d?e.features[r].geometry:f?e.geometry:e,h=d?e.features[r].properties:f?e.properties:{},u=d?e.features[r].bbox:f?e.bbox:undefined,p=d?e.features[r].id:f?e.id:undefined,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,c,h,u,p))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===t(o.geometries[n],c,h,u,p))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,c,h,u,p))return!1;c++}}function l(e,t){s(e,function(e,r,i,o,a){var s,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,i,{bbox:o,id:a}),r,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var h=0;h<e.coordinates.length;h++){var u={type:s,coordinates:e.coordinates[h]};if(!1===t(n.feature(u,i),r,h))return!1}})}function h(e,t){l(e,function(e,r,o){var a=0;if(e.geometry){var s=e.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,h=0,u=0,p=0;return!1!==i(e,function(i,s,c,d,f){if(l===undefined||r>h||d>u||f>p)return l=i,h=r,u=d,p=f,void(a=0);var g=n.lineString([l,i],e.properties);if(!1===t(g,r,o,f,a))return!1;a++,l=i})&&void 0}}})}function u(e,t){if(!e)throw new Error("geojson is required");l(e,function(e,r,i){if(null!==e.geometry){var o=e.geometry.type,a=e.geometry.coordinates;switch(o){case"LineString":if(!1===t(e,r,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===t(n.lineString(a[s],e.properties),r,i,s))return!1}}})}t.coordEach=i,t.coordReduce=function(e,t,r,n){var o=r;return i(e,function(e,n,i,a,s){o=0===n&&r===undefined?e:t(o,e,n,i,a,s)},n),o},t.propEach=o,t.propReduce=function(e,t,r){var n=r;return o(e,function(e,i){n=0===i&&r===undefined?e:t(n,e,i)}),n},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,i){n=0===i&&r===undefined?e:t(n,e,i)}),n},t.coordAll=function(e){var t=[];return i(e,function(e){t.push(e)}),t},t.geomEach=s,t.geomReduce=function(e,t,r){var n=r;return s(e,function(e,i,o,a,s){n=0===i&&r===undefined?e:t(n,e,i,o,a,s)}),n},t.flattenEach=l,t.flattenReduce=function(e,t,r){var n=r;return l(e,function(e,i,o){n=0===i&&0===o&&r===undefined?e:t(n,e,i,o)}),n},t.segmentEach=h,t.segmentReduce=function(e,t,r){var n=r,i=!1;return h(e,function(e,o,a,s,l){n=!1===i&&r===undefined?e:t(n,e,o,a,s,l),i=!0}),n},t.lineEach=u,t.lineReduce=function(e,t,r){var n=r;return u(e,function(e,i,o,a){n=0===i&&r===undefined?e:t(n,e,i,o,a)}),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,i=t.featureIndex||0,o=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.segmentIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),l=l||e.features[i].properties,r=e.features[i].geometry;break;case"Feature":l=l||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var h=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),n.lineString([h[s],h[s+1]],l,t);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s-1),n.lineString([h[a][s],h[a][s+1]],l,t);case"MultiLineString":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s-1),n.lineString([h[o][s],h[o][s+1]],l,t);case"MultiPolygon":return o<0&&(o=h.length+o),a<0&&(a=h[o].length+a),s<0&&(s=h[o][a].length-s-1),n.lineString([h[o][a][s],h[o][a][s+1]],l,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,i=t.featureIndex||0,o=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.coordIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":i<0&&(i=e.features.length+i),l=l||e.features[i].properties,r=e.features[i].geometry;break;case"Feature":l=l||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var h=r.coordinates;switch(r.type){case"Point":return n.point(h,l,t);case"MultiPoint":return o<0&&(o=h.length+o),n.point(h[o],l,t);case"LineString":return s<0&&(s=h.length+s),n.point(h[s],l,t);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s),n.point(h[a][s],l,t);case"MultiLineString":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s),n.point(h[o][s],l,t);case"MultiPolygon":return o<0&&(o=h.length+o),a<0&&(a=h[o].length+a),s<0&&(s=h[o][a].length-s),n.point(h[o][a][s],l,t)}throw new Error("geojson is invalid")}},function(e,t,r){var n=r(8),i=r(48),o=r(49),a="[object Null]",s="[object Undefined]",l=n?n.toStringTag:undefined;e.exports=function(e){return null==e?e===undefined?s:a:l&&l in Object(e)?i(e):o(e)}},function(e,t,r){var n=r(58),i=r(63);e.exports=function(e,t){var r=i(e,t);return n(r)?r:undefined}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){e.exports=r(18)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),i=(r.n(n),r(20)),o=(r.n(i),r(21)),a=r(22),s=r(0),l=(r(24),r(25),r(27),r(28),r(29),r(30),r(1)),h=(r(39),r(40),r(41),r(85),r(86),r(87),r(88)),u=(r.n(h),r(89));r.n(u);L.PM=L.PM||{Map:o.a,Toolbar:a.a,Draw:s.a,Edit:l.a,version:i.version,initialize(){this.addInitHooks()},addInitHooks(){L.Map.addInitHook(function(){this.options.pmIgnore||(this.pm=new L.PM.Map(this))}),L.LayerGroup.addInitHook(function(){this.pm=new L.PM.Edit.LayerGroup(this)}),L.Marker.addInitHook(function(){this.options.pmIgnore||(this.pm=new L.PM.Edit.Marker(this))}),L.Polyline.addInitHook(function(){this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.options.pmIgnore||(this.pm=new L.PM.Edit.Poly(this))}),L.Rectangle.addInitHook(function(){this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))})}},L.PM.initialize()},function(e,t){Array.prototype.findIndex=Array.prototype.findIndex||function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=Object(this),r=t.length>>>0,n=arguments[1],i=0;i<r;i++)if(e.call(n,t[i],i,t))return i;return-1},Array.prototype.find=Array.prototype.find||function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=Object(this),r=t.length>>>0,n=arguments[1],i=0;i<r;i++){var o=t[i];if(e.call(n,o,i,t))return o}},"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var r=arguments[t];if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})},function(e,t){e.exports={name:"leaflet.pm",version:"0.25.0-post3",description:"A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0",keywords:["leaflet","polygon management","geometry editing","map data","map overlay","polygon","geojson","leaflet-draw","data-field-geojson","ui-leaflet-draw"],files:["dist"],main:"dist/leaflet.pm.min.js",dependencies:{"@turf/difference":"6.x","@turf/intersect":"6.x","@turf/kinks":"6.x",lodash:"^4.17.10"},devDependencies:{"@babel/core":"^7.0.0-beta.40","@babel/preset-env":"^7.0.0-beta.40","babel-loader":"^8.0.0-beta.0","css-loader":"^0.28.0",eslint:"^4.18.2","eslint-config-airbnb-base":"^12.1.0","eslint-plugin-import":"^2.9.0","extract-text-webpack-plugin":"^3.0.2","file-loader":"^0.11.1",leaflet:"^1.3.1","style-loader":"^0.19.0",tape:"^4.9.0","tape-run":"^3.0.4","uglifyjs-webpack-plugin":"^1.1.0","url-loader":"^0.6.2",webpack:"^3.11.0"},peerDependencies:{leaflet:"^1.2.0"},scripts:{start:"npm run dev",dev:"webpack --config=webpack.dev.js",test:"browserify ./spec/test.spec.js | tape-run",build:"webpack --config=webpack.build.js",prepare:"npm run build"},repository:{type:"git",url:"git+https://github.com/codeofsumit/leaflet.pm.git"},author:{name:"Sumit Kumar",email:"sk@outlook.com",url:"http://twitter.com/TweetsOfSumit"},license:"MIT",bugs:{url:"https://github.com/codeofsumit/leaflet.pm/issues"},homepage:"https://leafletpm.now.sh",readme:"# Leaflet Geometry Management\n\nA Leaflet Plugin For Creating And Editing Geometry Layers in Leaflet 1.0.\\\nDraw, Edit, Drag, Cut and Snap Features.\n\nIn the name \"leaflet.pm\" the \"pm\" stands for Polygon Management. At the time,\nthis plugin only supported polygons. Now you can edit Markers, Polylines,\nPolygons, Circles, Rectangles, LayerGroups, GeoJSON, MultiPolygons, MultiPolylines and more are coming.\n\n## [Demo (click here)](https://leafletpm.now.sh)\n\n![snap at drag](https://github.com/codeofsumit/leaflet.pm-demo/blob/master/static/gifs/github-demo.gif)\n\n### Why _another_ geometry editing plugin?\n\nAs leaflet.draw development seemed to came to a halt and I needed support for\nleaflet 1.0 I created this plugin myself due to a lack of alternatives.\\\nAs we are always using the latest leaflet version in a big production app, I will\n(have to) keep this plugin constantly developed.\n\n### Getting Started\n\n#### Install via npm\n\n```\nnpm install leaflet.pm --save\n```\n\n#### Install Manually\n\nDownload\n[`leaflet.pm.css`](https://unpkg.com/leaflet.pm@latest/dist/leaflet.pm.css) and\n[`leaflet.pm.min.js`](https://unpkg.com/leaflet.pm@latest/dist/leaflet.pm.min.js)\nand include them in your project.\n\n#### Include via CDN\n\nCSS\n\n```html\n<link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet.pm@latest/dist/leaflet.pm.css\" />\n```\n\nJS\n\n```html\n<script src=\"https://unpkg.com/leaflet.pm@latest/dist/leaflet.pm.min.js\"><\/script>\n```\n\n#### Include as ES6 Module\n\n```js\nimport 'leaflet.pm';\nimport 'leaflet.pm/dist/leaflet.pm.css';\n```\n\n#### Include as CommonJS Module\n\n```js\nrequire('leaflet.pm');\nrequire('leaflet.pm/dist/leaflet.pm.css');\n```\n\n### Documentation\n\n#### Init Leaflet.PM\n\nJust include `leaflet.pm.min.js` right after Leaflet. It initializes itself. If\nyou want certain layers to be ignored by leaflet.pm, pass `pmIgnore: true` to\ntheir options when creating them. Example:\n\n```js\nL.marker([51.50915, -0.096112], { pmIgnore: true }).addTo(map);\n```\n\n##### Leaflet.PM Toolbar\n\nThis plugin comes with an optional toolbar to give you buttons to use the\nvarious features.\n\n```js\n// define toolbar options\nvar options = {\n    position: 'topleft', // toolbar position, options are 'topleft', 'topright', 'bottomleft', 'bottomright'\n    drawMarker: true, // adds button to draw markers\n    drawPolyline: true, // adds button to draw a polyline\n    drawRectangle: true, // adds button to draw a rectangle\n    drawPolygon: true, // adds button to draw a polygon\n    drawCircle: true, // adds button to draw a cricle\n    cutPolygon: true, // adds button to cut a hole in a polygon\n    editMode: true, // adds button to toggle edit mode for all layers\n    removalMode: true, // adds a button to remove layers\n};\n\n// add leaflet.pm controls to the map\nmap.pm.addControls(options);\n```\n\nIf no options are passed, all buttons will be shown.\n\nIf you are wondering how e.g. the `drawPolygon` button will enable drawing mode\nwith specific options, here it is: Simply enable drawing mode programatically,\npass it your options and disable it again. The options will persist, even when\nthe mode is enabled/disabled via the toolbar.\n\nExample:\n\n```js\n// make markers not snappable during marker draw\nmap.pm.enableDraw('Marker', { snappable: false });\nmap.pm.disableDraw('Marker');\n\n// let polygons finish their shape on double click\nmap.pm.enableDraw('Poly', { finishOn: 'dblclick' });\nmap.pm.disableDraw('Poly');\n```\n\nAll available options are specified in the Drawing Mode Section below\n\n##### Drawing Mode\n\nUse Drawing Mode on a map like this\n\n```js\n// optional options for line style during draw. These are the defaults\nvar options = {\n    // snapping\n    snappable: true,\n    snapDistance: 20,\n\n    // self intersection\n    allowSelfIntersection: true,\n\n    // the lines between coordinates/markers\n    templineStyle: {\n        color: 'red',\n    },\n\n    // the line from the last marker to the mouse cursor\n    hintlineStyle: {\n        color: 'red',\n        dashArray: [5, 5],\n    },\n\n    // show a marker at the cursor\n    cursorMarker: false,\n\n    // finish drawing on double click\n    // DEPRECATED: use finishOn: 'dblclick' instead\n    finishOnDoubleClick: false,\n\n    // specify type of layer event to finish the drawn shape\n    // example events: 'mouseout', 'dblclick', 'contextmenu'\n    // List: http://leafletjs.com/reference-1.2.0.html#interactive-layer-click\n    finishOn: 'contextmenu',\n\n    // custom marker style (only for Marker draw)\n    markerStyle: {\n        opacity: 0.5,\n        draggable: true,\n    },\n};\n\n// enable drawing mode for shape - e.g. Poly, Line, etc\nmap.pm.enableDraw('Poly', options);\nmap.pm.enableDraw('Rectangle', options);\nmap.pm.enableDraw('Line', options);\nmap.pm.enableDraw('Marker', options);\nmap.pm.enableDraw('Circle', options);\n\n// get array of all available shapes\nmap.pm.Draw.getShapes();\n\n// listen to when drawing mode gets enabled\nmap.on('pm:drawstart', function(e) {\n    e.shape; // the name of the shape being drawn (i.e. 'Circle')\n    e.workingLayer; // the leaflet layer displayed while drawing\n});\n\n// disable drawing mode\nmap.pm.disableDraw('Poly');\n\n// listen to when drawing mode gets disabled\nmap.on('pm:drawend', function(e) {\n    e.shape; // the name of the shape being drawn (i.e. 'Circle')\n});\n\n// listen to when a new layer is created\nmap.on('pm:create', function(e) {\n    e.shape; // the name of the shape being drawn (i.e. 'Circle')\n    e.layer; // the leaflet layer created\n});\n\n// listen to vertexes being added to the workingLayer (works only on polylines & polygons)\nmap.on('pm:drawstart', function(e) {\n    var layer = e.workingLayer;\n    layer.on('pm:vertexadded', function(e) {\n        // e includes the new vertex, it's marker\n        // the index in the coordinates array\n        // the working layer and shape\n    });\n\n    // check self intersection\n    layer.pm.hasSelfIntersection();\n});\n\n// listen to the center of a circle being added\nmap.on('pm:drawstart', function(e) {\n    var circle = e.workingLayer;\n\n    // this fires only for circles\n    circle.on('pm:centerplaced', function(e) {\n        console.log(e);\n    });\n});\n\n// listen to when the center of a circle is moved\nmap.on('pm:create', function(e) {\n    var circle = e.layer;\n\n    // this fires only for circles\n    circle.on('pm:centerplaced', function(e) {\n        console.log(e);\n    });\n});\n```\n\n##### Creating Holes or Cutting a Polygon\n\n![cut polygon](https://user-images.githubusercontent.com/2399810/29863151-15929280-8d6f-11e7-90e8-1935695175aa.gif)\nEnable drawing for the shape \"Cut\" to draw a polygon that gets subtracted from\nall underlying polygons. This way you can create holes, cut polygons in half or\nremove parts of it.\n\nImportant: the cutted layer will be replaced, not updated. Listen to the\n`pm:cut` event to update your layer references in your code. The `pm:cut` event\nwill provide you with the old/removed/cut layer and returns the resulting\nlayer(s) that is/are added to the map.\n\n```js\n// recommended options (used when enabled via toolbar)\nvar options = { snappable: false, cursorMarker: false };\n\n// enable cutting\nmap.pm.Draw.Cut.enable(options);\n\n// disable cutting\nmap.pm.Draw.Cut.disable(options);\n\n// toggle cutting\nmap.pm.Draw.Cut.toggle(options);\n\n// listen to when a specific layer gets cut\nlayer.on('pm:cut', function(e) {});\n\n// listen to when any layer on the map gets cut\nmap.on('pm:cut', function(e) {});\n```\n\n##### Edit Mode\n\nUse Edit Mode for a layer like this:\n\n```js\nvar polygonLayer = L.geoJson(data).addTo(map);\n\n// optional options\nvar options = {\n    // makes the layer draggable\n    draggable: true,\n\n    // makes the vertices snappable to other layers\n    // temporarily disable snapping during drag by pressing ALT\n    snappable: true,\n\n    // distance in pixels that needs to be undercut to trigger snapping\n    // default: 30\n    snapDistance: 30,\n\n    // self intersection allowed?\n    allowSelfIntersection: true,\n\n    // disable the removal of markers/vertexes via right click\n    preventMarkerRemoval: false,\n\n    // disable the possibility to edit vertexes\n    preventVertexEdit: false,\n};\n\n// enable edit mode\npolygonLayer.pm.enable(options);\nmarker.pm.enable(options);\n\n// disable edit mode\npolygonLayer.pm.disable();\n\n// toggle edit mode\npolygonLayer.pm.toggleEdit(options);\n\n// check if edit mode is enabled\npolygonLayer.pm.enabled(); // returns true/false\n\n// listen to changes\npolygonLayer.on('pm:edit', function(e) {});\npolygonLayer.on('pm:dragstart', function(e) {});\npolygonLayer.on('pm:drag', function(e) {});\npolygonLayer.on('pm:dragend', function(e) {});\n\n// listen to when vertexes are being added or removed from the layer\npolygonLayer.on('pm:vertexadded', function(e) {});\npolygonLayer.on('pm:vertexremoved', function(e) {});\n\n// listen to when a marker of a polygon-vertex is being dragged\npolygonLayer.on('pm:markerdragstart', function(e) {\n    // the property e.ringIndex refers to the coordinate ring inside the polygon the marker belongs to\n    // if it's undefined, there are no rings\n    // e.index is the index of the marker inside the coordinate ring / array it belongs to\n});\npolygonLayer.on('pm:markerdragend', function(e) {});\n\n// listen to when snapping occurs\n// pm:snap and pm:unsnap are, in addition to the layer, also fired on the markers of the polygon\n// if you'd need it for some advanced behaviour\npolygonLayer.on('pm:snap', function(e) {});\npolygonLayer.on('pm:unsnap', function(e) {});\n\n// if allowSelfIntersection is false: listen to when a self-intersection is detected\n// e.intersection includes a geoJSON of the intersection\npolygonLayer.on('pm:intersect', function(e) {});\n\n// toggle global edit mode (edit mode for all layers on the map)\nmap.pm.toggleGlobalEditMode(options);\n\n// listen to when global edit mode is toggled\nmap.on('pm:globaleditmodetoggled', function(e) {});\n\n// check self intersection\npolygonLayer.pm.hasSelfIntersection(); // true/false\n```\n\n##### Removal Mode\n\n```js\n// toggle global removal mode\nmap.pm.toggleGlobalRemovalMode();\n\n// listen to removal of layers that are NOT ignored and NOT helpers by leaflet.pm\nmap.on('pm:remove', function(e) {});\n```\n\n### Customize Style\n\nIn order to change the style of the lines during draw, pass these options to the\n`enableDraw()` function.\n\n```js\n// optional options for line style during draw. These are the defaults\nvar options = {\n    // the lines between coordinates/markers\n    templineStyle: {\n        color: 'red',\n    },\n\n    // the line from the last marker to the mouse cursor\n    hintlineStyle: {\n        color: 'red',\n        dashArray: [5, 5],\n    },\n};\n\n// enable drawing mode for shape - e.g. Poly, Line, Circle, etc\nmap.pm.enableDraw('Poly', options);\n```\n\nTo customize the style of the drawn layer with leaflet options, you can either\npass the options to `enableDraw`:\n\n```js\n// optional options for line style during draw. These are the defaults\nvar options = {\n    templineStyle: {},\n    hintlineStyle: {},\n    pathOptions: {\n        // add leaflet options for polylines/polygons\n        color: 'orange',\n        fillColor: 'green',\n    },\n};\n\n// enable drawing mode for shape - e.g. Poly or Line\nmap.pm.enableDraw('Poly', options);\n```\n\nor set the options generally:\n\n```js\nmap.pm.setPathOptions({\n    color: 'orange',\n    fillColor: 'green',\n    fillOpacity: 0.4,\n});\n```\n\n### Feature Request\n\nI'm adopting the Issue Management of lodash which means, feature requests get the \"Feature Request\" Label and then get closed.\nYou can upvote to existing feature requests (or create new ones). Upvotes make me see how much a feature is requested and prioritize their implementation.\nPlease see the existing [Feature Requests here](https://github.com/codeofsumit/leaflet.pm/issues?q=is%3Aissue+label%3A%22feature+request%22+is%3Aclosed) and upvote if you want them to be implemented.\n\n### Credit\n\nAs I never built a leaflet plugin before, I looked heavily into the code of\nleaflet.draw to find out how to do stuff. So don't be surprised to see some\nfamiliar code.\n\nThe icons used for the toolbar are CC-BY [Glyphicons](http://glyphicons.com/).\n\nI also took a hard look at the great\n[L.GeometryUtil](https://github.com/makinacorpus/Leaflet.GeometryUtil) for some\nof my helper functions.\n",readmeFilename:"README.md",_id:"leaflet.pm@0.25.0-post3",_shasum:"bfe8c24b3862ce4f66f5e0b7c46cb1bdb9e88590",_resolved:"https://github.com/winfieldco/leaflet.pm/archive/0.25.0-post3.tar.gz",_from:"https://github.com/winfieldco/leaflet.pm/archive/0.25.0-post3.tar.gz"}},function(e,t,r){"use strict";const n=L.Class.extend({initialize(e){this.map=e,this.Draw=new L.PM.Draw(e),this.Toolbar=new L.PM.Toolbar(e),this.map.on("layerremove",e=>{e.layer.pm&&!e.layer._pmTempLayer&&this.map.fire("pm:remove",e)}),this._globalRemovalMode=!1},addControls(e){this.Toolbar.addControls(e)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(e="Poly",t){this.Draw.enable(e,t)},disableDraw(e="Poly"){this.Draw.disable(e)},setPathOptions(e){this.Draw.setPathOptions(e)},removeLayer(e){const t=e.target;t._layers||t.pm&&t.pm.dragging()||e.target.remove()},toggleGlobalRemovalMode(){this.globalRemovalEnabled()?(this._globalRemovalMode=!1,this.map.eachLayer(e=>{e.off("click",this.removeLayer)})):(this._globalRemovalMode=!0,this.map.eachLayer(e=>{!e.pm||e.pm.options&&e.pm.options.preventMarkerRemoval||e.on("click",this.removeLayer)})),this.Toolbar.toggleButton("deleteLayer",this._globalRemovalMode)},globalRemovalEnabled(){return this._globalRemovalMode},globalEditEnabled(){return this._globalEditMode},enableGlobalEditMode(e){let t=[];this.map.eachLayer(e=>{(e instanceof L.Polyline||e instanceof L.Marker||e instanceof L.Circle)&&t.push(e)}),t=(t=t.filter(e=>!!e.pm)).filter(e=>!e._pmTempLayer),this._globalEditMode=!0,t.forEach(t=>{t.pm.enable(e)}),this.Toolbar.toggleButton("editPolygon",this._globalEditMode),this._fireEditModeEvent(!0)},disableGlobalEditMode(){let e=[];this.map.eachLayer(t=>{(t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.Circle)&&e.push(t)}),e=(e=e.filter(e=>!!e.pm)).filter(e=>!e._pmTempLayer),this._globalEditMode=!1,e.forEach(e=>{e.pm.disable()}),this.Toolbar.toggleButton("editPolygon",this._globalEditMode),this._fireEditModeEvent(!1)},_fireEditModeEvent(e){this.map.fire("pm:globaleditmodetoggled",{enabled:e,map:this.map})},toggleGlobalEditMode(e){console.log("toggle global edit mode",e),this.globalEditEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(e)}});t.a=n},function(e,t,r){"use strict";var n=r(23);L.Control.PMButton=n.a;const i=L.Class.extend({options:{drawMarker:!0,drawPolygon:!0,drawPolyline:!0,drawCircle:!0,drawRectangle:!0,editMode:!0,cutPolygon:!0,dragPolygon:!1,removalMode:!0,position:"topleft"},initialize(e){this.map=e,this.buttons={},this.isVisible=!1,this.container=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-bar leaflet-control"),this._defineButtons()},getButtons(){return this.buttons},addControls(e=this.options){"undefined"!=typeof e.editPolygon&&(e.editMode=e.editPolygon),"undefined"!=typeof e.deleteLayer&&(e.removalMode=e.deleteLayer),L.Util.setOptions(this,e),this._showHideButtons(),this.isVisible=!0},removeControls(){const e=this.getButtons();for(const t in e)e[t].remove();this.isVisible=!1},toggleControls(e=this.options){this.isVisible?this.removeControls():this.addControls(e)},_addButton(e,t){return this.buttons[e]=t,this.options[e]=this.options[e]||!1,this.buttons[e]},triggerClickOnToggledButtons(e){for(const t in this.buttons)this.buttons[t]!==e&&this.buttons[t].toggled()&&this.buttons[t]._triggerClick()},toggleButton(e,t){return"editPolygon"===e&&(e="editMode"),"deleteLayer"===e&&(e="removalMode"),this.triggerClickOnToggledButtons(this.buttons[e]),this.buttons[e].toggle(t)},_defineButtons(){const e={className:" leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position},t={className:"leaflet-pm-icon-polygon",onClick:()=>{},afterClick:()=>{this.map.pm.Draw.Poly.toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position},r={className:"leaflet-pm-icon-cut",onClick:()=>{},afterClick:()=>{this.map.pm.Draw.Cut.toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position},n={className:"leaflet-pm-icon-marker",onClick:()=>{},afterClick:()=>{this.map.pm.Draw.Marker.toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position},i={className:"leaflet-pm-icon-polyline",onClick:()=>{},afterClick:()=>{this.map.pm.Draw.Line.toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position},o={className:"leaflet-pm-icon-circle",onClick:()=>{},afterClick:()=>{this.map.pm.Draw.Circle.toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position},a={className:"leaflet-pm-icon-rectangle",onClick:()=>{},afterClick:()=>{this.map.pm.Draw.Rectangle.toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position},s={className:"leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position},l={className:"leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position};this._addButton("drawMarker",new L.Control.PMButton(n)),this._addButton("drawPolyline",new L.Control.PMButton(i)),this._addButton("drawRectangle",new L.Control.PMButton(a)),this._addButton("drawPolygon",new L.Control.PMButton(t)),this._addButton("drawCircle",new L.Control.PMButton(o)),this._addButton("cutPolygon",new L.Control.PMButton(r)),this._addButton("editMode",new L.Control.PMButton(s)),this._addButton("dragPolygon",new L.Control.PMButton(l)),this._addButton("removalMode",new L.Control.PMButton(e))},_showHideButtons(){this.removeControls();const e=this.getButtons();for(const t in e)this.options[t]&&(e[t].setPosition(this.options.position),e[t].addTo(this.map))}});t.a=i},function(e,t,r){"use strict";const n=L.Control.extend({options:{position:"topleft"},initialize(e){this._button=L.Util.setOptions(this,e)},onAdd(e){return this._map=e,this._container=this._map.pm.Toolbar.container,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(e){return this._button.toggleStatus="boolean"==typeof e?e:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},_triggerClick(e){this._button.onClick(e),this._clicked(e),this._button.afterClick(e)},_makeButton(e){const t=L.DomUtil.create("a","leaflet-buttons-control-button",this._container);e.toggleStatus&&L.DomUtil.addClass(t,"active");const r=L.DomUtil.create("div","control-icon",t);return e.iconUrl&&r.setAttribute("src",e.iconUrl),e.className&&L.DomUtil.addClass(r,e.className),L.DomEvent.addListener(t,"click",()=>{this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this)}),L.DomEvent.addListener(t,"click",this._triggerClick,this),L.DomEvent.disableClickPropagation(t),t},_applyStyleClasses(){this._container&&(this._button.toggleStatus?L.DomUtil.addClass(this.buttonsDomNode,"active"):L.DomUtil.removeClass(this.buttonsDomNode,"active"))},_clicked(){this._button.doToggle&&this.toggle()}});t.a=n},function(e,t,r){"use strict";var n=r(0);n.a.Marker=n.a.extend({initialize(e){this._map=e,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(e){L.Util.setOptions(this,e),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker([0,0],this.options.markerStyle),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.fire("pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._map.eachLayer(e=>{e instanceof L.Marker&&e.pm&&e.pm.enable()})},disable(){this._enabled&&(this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(e=>{e instanceof L.Marker&&e.pm&&!e._pmTempLayer&&e.pm.disable()}),this._map.fire("pm:drawend",{shape:this._shape}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this._enabled=!1)},enabled(){return this._enabled},toggle(e){this.enabled()?this.disable():this.enable(e)},_createMarker(e){if(!e.latlng)return;this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);const t=this._hintMarker.getLatLng(),r=new L.Marker(t,this.options.markerStyle);r.addTo(this._map),r.pm.enable(),this._map.fire("pm:create",{shape:this._shape,marker:r,layer:r}),this._cleanupSnapping()},_syncHintMarker(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){const t=e;t.target=this._hintMarker,this._handleSnapping(t)}}})},function(e,t,r){"use strict";var n=r(11),i=r.n(n),o=r(0);o.a.Line=o.a.extend({initialize(e){this._map=e,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(e){L.Util.setOptions(this,e),this.options.finishOnDoubleClick&&!this.options.finishOn&&(this.options.finishOn="dblclick"),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],this.options.templineStyle),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this._map.on(this.options.finishOn,this._finishShape,this),"dblclick"===this.options.finishOn&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.fire("pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[]},disable(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.fire("pm:drawend",{shape:this._shape}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping())},enabled(){return this._enabled},toggle(e){this.enabled()?this.disable():this.enable(e)},hasSelfIntersection(){return i()(this._layer.toGeoJSON()).features.length>0},_syncHintLine(){const e=this._layer.getLatLngs();if(e.length>0){const t=e[e.length-1];this._hintline.setLatLngs([t,this._hintMarker.getLatLng()])}},_syncHintMarker(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){const t=e;t.target=this._hintMarker,this._handleSnapping(t)}this.options.allowSelfIntersection||this._handleSelfIntersection()},_handleSelfIntersection(){const e=L.polyline(this._layer.getLatLngs());e.addLatLng(this._hintMarker.getLatLng());const t=i()(e.toGeoJSON());this._doesSelfIntersect=t.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"red"}):this._hintline.setStyle(this.options.hintlineStyle)},_createVertex(e){if(!this.options.allowSelfIntersection&&this._doesSelfIntersect)return;this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);const t=this._hintMarker.getLatLng();if(t.equals(this._layer.getLatLngs()[0]))return void this._finishShape(e);const r=0===this._layer.getLatLngs().length;this._layer.addLatLng(t);const n=this._createMarker(t,r);this._hintline.setLatLngs([t,t]),this._layer.fire("pm:vertexadded",{shape:this._shape,workingLayer:this._layer,marker:n,latlng:t})},_finishShape(){if(!this.options.allowSelfIntersection&&this._doesSelfIntersect)return;const e=this._layer.getLatLngs(),t=L.polyline(e,this.options.pathOptions).addTo(this._map);this.disable(),this._map.fire("pm:create",{shape:this._shape,layer:t}),this.options.snappable&&this._cleanupSnapping()},_createMarker(e){const t=new L.Marker(e,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return t._pmTempLayer=!0,this._layerGroup.addLayer(t),t.on("click",this._finishShape,this),t}})},function(e,t,r){"use strict";function n(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function i(e,t,r){return void 0===r&&(r={}),n({type:"Point",coordinates:e},t,r)}function o(e,t,r){void 0===r&&(r={});for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,r)}function a(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,r)}function s(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function l(e,t,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:e},t,r)}function h(e,t,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:e},t,r)}function u(e,t,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:e},t,r)}function p(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function c(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function d(e){return 180*(e%(2*Math.PI))/Math.PI}function f(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return i(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return o(t).geometry;case"MultiPoint":return h(t).geometry;case"MultiLineString":return l(t).geometry;case"MultiPolygon":return u(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return i(e,t)}),r)},t.polygon=o,t.polygons=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return o(e,t)}),r)},t.lineString=a,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return a(e,t)}),r)},t.featureCollection=s,t.multiLineString=l,t.multiPoint=h,t.multiPolygon=u,t.geometryCollection=function(e,t,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:e},t,r)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=p,t.lengthToRadians=c,t.lengthToDegrees=function(e,t){return d(c(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=d,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return p(c(e,t),r)},t.convertArea=function(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[r];if(!i)throw new Error("invalid original units");var o=t.areaFactors[n];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=f,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!f(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(e,t,r){"use strict";var n=r(0);n.a.Poly=n.a.Line.extend({initialize(e){this._map=e,this._shape="Poly",this.toolbarButtonName="drawPolygon"},_finishShape(e){if(!this.options.allowSelfIntersection&&this._doesSelfIntersect)return;const t=this._layer.getLatLngs();e&&"dblclick"===e.type&&t.splice(t.length-1,1);const r=L.polygon(t,this.options.pathOptions).addTo(this._map);this.disable(),this._map.fire("pm:create",{shape:this._shape,layer:r}),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex},_createMarker(e,t){const r=new L.Marker(e,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return r._pmTempLayer=!0,this._layerGroup.addLayer(r),t&&(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()),r}})},function(e,t,r){"use strict";var n=r(0);n.a.Rectangle=n.a.extend({initialize(e){this._map=e,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(e){if(L.Util.setOptions(this,e),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._layer._pmTempLayer=!0,this._startMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!0,zIndexOffset:100,opacity:this.options.cursorMarker?1:0}),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker){L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._styleMarkers=[];for(let e=0;e<2;e+=1){const e=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!0,zIndexOffset:100});e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._styleMarkers.push(e)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.fire("pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[]},disable(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.fire("pm:drawend",{shape:this._shape}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping())},enabled(){return this._enabled},toggle(e){this.enabled()?this.disable():this.enable(e)},_placeStartingMarkers(e){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);const t=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(t),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(e=>{L.DomUtil.addClass(e._icon,"visible"),e.setLatLng(t)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._setRectangleOrigin()},_setRectangleOrigin(){const e=this._startMarker.getLatLng();e&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([e,e]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){const t=e;t.target=this._hintMarker,this._handleSnapping(t)}},_syncRectangleSize(){const e=this._startMarker.getLatLng(),t=this._hintMarker.getLatLng();if(this._layer.setBounds([e,t]),this.options.cursorMarker&&this._styleMarkers){const e=[];this._findCorners().forEach(t=>{t.equals(this._startMarker.getLatLng())||t.equals(this._hintMarker.getLatLng())||e.push(t)}),e.forEach((e,t)=>{this._styleMarkers[t].setLatLng(e)})}},_finishShape(){const e=this._startMarker.getLatLng(),t=this._hintMarker.getLatLng(),r=L.rectangle([e,t],this.options.pathOptions).addTo(this._map);this.disable(),this._map.fire("pm:create",{shape:this._shape,layer:r})},_findCorners(){const e=this._layer.getBounds();return[e.getNorthWest(),e.getNorthEast(),e.getSouthEast(),e.getSouthWest()]}})},function(e,t,r){"use strict";var n=r(0);n.a.Circle=n.a.extend({initialize(e){this._map=e,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable(e){L.Util.setOptions(this,e),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle([0,0],this.options.templineStyle),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._centerMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._centerMarker),this._hintMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._hintline=L.polyline([],this.options.hintlineStyle),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.fire("pm:drawstart",{shape:this._shape,workingLayer:this._layer}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[]},disable(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.fire("pm:drawend",{shape:this._shape}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping())},enabled(){return this._enabled},toggle(e){this.enabled()?this.disable():this.enable(e)},_syncHintLine(){const e=this._centerMarker.getLatLng();this._hintline.setLatLngs([e,this._hintMarker.getLatLng()])},_syncCircleRadius(){const e=this._centerMarker.getLatLng(),t=this._hintMarker.getLatLng(),r=e.distanceTo(t);this._layer.setRadius(r)},_syncHintMarker(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){const t=e;t.target=this._hintMarker,this._handleSnapping(t)}},_placeCenterMarker(e){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);const t=this._hintMarker.getLatLng();this._centerMarker.setLatLng(t),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){const e=this._centerMarker.getLatLng();e&&(this._layer.setLatLng(e),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._layer.fire("pm:centerplaced",{shape:this._shape,workingLayer:this._layer,latlng:e}))},_finishShape(){const e=this._centerMarker.getLatLng(),t=this._hintMarker.getLatLng(),r=e.distanceTo(t),n=L.circle(e,{radius:r}).addTo(this._map);this.disable(),this._map.fire("pm:create",{shape:this._shape,layer:n})},_createMarker(e){const t=new L.Marker(e,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return t._pmTempLayer=!0,this._layerGroup.addLayer(t),t}})},function(e,t,r){"use strict";var n=r(31),i=r.n(n),o=r(34),a=r.n(o),s=r(0);s.a.Cut=s.a.Poly.extend({initialize(e){this._map=e,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_cut(e){const t=this._map._layers;Object.keys(t).map(e=>t[e]).filter(e=>e.pm).filter(e=>e instanceof L.Polygon).filter(t=>t!==e).filter(t=>{try{return!!i()(e.toGeoJSON(),t.toGeoJSON())}catch(r){return console.error("You cant cut polygons with self-intersections"),!1}}).forEach(t=>{const r=[],n=a()(t.toGeoJSON(),e.toGeoJSON()),i=L.geoJSON(n,t.options).addTo(this._map);r.push(i),i.addTo(this._map),i.pm.enable(this.options),i.pm.disable(),t.fire("pm:cut",{shape:this._shape,layer:t,resultingLayers:r}),this._map.fire("pm:cut",{shape:this._shape,cuttedLayer:t,resultingLayers:r}),t._pmTempLayer=!0,e._pmTempLayer=!0,t.remove(),e.remove()})},_finishShape(){const e=this._layer.getLatLngs(),t=L.polygon(e,this.options.pathOptions);this._cut(t),this.disable(),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex}})},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(12),o=r(32),a=n(r(33));t["default"]=function s(e,t,r){void 0===r&&(r={});var n=o.getGeom(e),l=o.getGeom(t);if("Polygon"===n.type&&"Polygon"===l.type){var h=a.intersection(n.coordinates,l.coordinates);if(null===h||0===h.length)return null;if(1===h.length){var u=h[0][0][0],p=h[0][0][h[0][0].length-1];return u[0]===p[0]&&u[1]===p[1]?i.polygon(h[0],r.properties):null}return i.multiPolygon(h,r.properties)}if("MultiPolygon"===n.type){for(var c=[],d=0,f=n.coordinates;d<f.length;d++){var g=f[d],m=s(o.getGeom(i.polygon(g)),l);if(m){var y=o.getGeom(m);if("Polygon"===y.type)c.push(y.coordinates);else{if("MultiPolygon"!==y.type)throw new Error("intersection is invalid");c=c.concat(y.coordinates)}}}return 0===c.length?null:1===c.length?i.polygon(c[0],r.properties):i.multiPolygon(c,r.properties)}if("MultiPolygon"===l.type)return s(l,n);throw new Error("poly1 and poly2 must be either polygons or multiPolygons")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12);t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function i(e){if(e.length>1&&n.isNumber(e[0])&&n.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return i(e[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,i=e.features;n<i.length;n++){var o=i[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+o.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},function(e,t,r){!function(e,r){r(t)}(0,function(e){"use strict";function t(e,t){return e>t?1:e<t?-1:0}var r=function(e,r){void 0===e&&(e=t),void 0===r&&(r=!1),this._compare=e,this._root=null,this._size=0,this._noDuplicates=!!r},n={size:{configurable:!0}};r.prototype.rotateLeft=function(e){var t=e.right;t&&(e.right=t.left,t.left&&(t.left.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.left=e),e.parent=t},r.prototype.rotateRight=function(e){var t=e.left;t&&(e.left=t.right,t.right&&(t.right.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.right=e),e.parent=t},r.prototype._splay=function(e){for(;e.parent;){var t=e.parent;t.parent?t.left===e&&t.parent.left===t?(this.rotateRight(t.parent),this.rotateRight(t)):t.right===e&&t.parent.right===t?(this.rotateLeft(t.parent),this.rotateLeft(t)):t.left===e&&t.parent.right===t?(this.rotateRight(t),this.rotateLeft(t)):(this.rotateLeft(t),this.rotateRight(t)):t.left===e?this.rotateRight(t):this.rotateLeft(t)}},r.prototype.splay=function(e){for(var t,r,n,i,o;e.parent;)(r=(t=e.parent).parent)&&r.parent?((n=r.parent).left===r?n.left=e:n.right=e,e.parent=n):(e.parent=null,this._root=e),i=e.left,o=e.right,e===t.left?(r&&(r.left===t?(t.right?(r.left=t.right,r.left.parent=r):r.left=null,t.right=r,r.parent=t):(i?(r.right=i,i.parent=r):r.right=null,e.left=r,r.parent=e)),o?(t.left=o,o.parent=t):t.left=null,e.right=t,t.parent=e):(r&&(r.right===t?(t.left?(r.right=t.left,r.right.parent=r):r.right=null,t.left=r,r.parent=t):(o?(r.left=o,o.parent=r):r.left=null,e.right=r,r.parent=e)),i?(t.right=i,i.parent=t):t.right=null,e.left=t,t.parent=e)},r.prototype.replace=function(e,t){e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.parent=e.parent)},r.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},r.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},r.prototype.insert=function(e,t){var r=this._root,n=null,i=this._compare;if(this._noDuplicates)for(;r;){if(n=r,0===i(r.key,e))return;r=i(r.key,e)<0?r.right:r.left}else for(;r;)n=r,r=i(r.key,e)<0?r.right:r.left;return r={key:e,data:t,left:null,right:null,parent:n},n?i(n.key,r.key)<0?n.right=r:n.left=r:this._root=r,this.splay(r),this._size++,r},r.prototype.find=function(e){for(var t=this._root,r=this._compare;t;){var n=r(t.key,e);if(n<0)t=t.right;else{if(!(n>0))return t;t=t.left}}return null},r.prototype.contains=function(e){for(var t=this._root,r=this._compare;t;){var n=r(e,t.key);if(0===n)return!0;t=n<0?t.left:t.right}return!1},r.prototype.remove=function(e){var t=this.find(e);if(!t)return!1;if(this.splay(t),t.left)if(t.right){var r=this.minNode(t.right);r.parent!==t&&(this.replace(r,r.right),r.right=t.right,r.right.parent=r),this.replace(t,r),r.left=t.left,r.left.parent=r}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},r.prototype.removeNode=function(e){if(!e)return!1;if(this.splay(e),e.left)if(e.right){var t=this.minNode(e.right);t.parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},r.prototype.erase=function(e){var t=this.find(e);if(t){this.splay(t);var r=t.left,n=t.right,i=null;r&&(r.parent=null,i=this.maxNode(r),this.splay(i),this._root=i),n&&(r?i.right=n:this._root=n,n.parent=i),this._size--}},r.prototype.pop=function(){var e=this._root,t=null;if(e){for(;e.left;)e=e.left;t={key:e.key,data:e.data},this.remove(e.key)}return t},r.prototype.next=function(e){var t=e;if(t)if(t.right)for(t=t.right;t&&t.left;)t=t.left;else for(t=e.parent;t&&t.right===e;)e=t,t=t.parent;return t},r.prototype.prev=function(e){var t=e;if(t)if(t.left)for(t=t.left;t&&t.right;)t=t.right;else for(t=e.parent;t&&t.left===e;)e=t,t=t.parent;return t},r.prototype.forEach=function(e){for(var t=this._root,r=[],n=!1,i=0;!n;)t?(r.push(t),t=t.left):r.length>0?(e(t=r.pop(),i++),t=t.right):n=!0;return this},r.prototype.range=function(e,t,r,n){for(var i=[],o=this._compare,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,t)>0)break;if(o(a.key,e)>=0&&r.call(n,a))return this;a=a.right}return this},r.prototype.keys=function(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.key),e=e.right):n=!0;return r},r.prototype.values=function(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.data),e=e.right):n=!0;return r},r.prototype.at=function(e){for(var t=this._root,r=[],n=!1,i=0;!n;)if(t)r.push(t),t=t.left;else if(r.length>0){if(t=r.pop(),i===e)return t;i++,t=t.right}else n=!0;return null},r.prototype.load=function(e,t,r){if(void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var n=e.length;return r&&function i(e,t,r,n,o){if(r>=n)return;var a=e[r+n>>1];var s=r-1;var l=n+1;for(;;){do{s++}while(o(e[s],a)<0);do{l--}while(o(e[l],a)>0);if(s>=l)break;var h=e[s];e[s]=e[l],e[l]=h,h=t[s],t[s]=t[l],t[l]=h}i(e,t,r,l,o);i(e,t,l+1,n,o)}(e,t,0,n-1,this._compare),this._root=function o(e,t,r,n,i){var a=i-n;if(a>0){var s=n+Math.floor(a/2),l=t[s],h=r[s],u={key:l,data:h,parent:e};return u.left=o(u,t,r,n,s),u.right=o(u,t,r,s+1,i),u}return null}(null,e,t,0,n),this._size=n,this},r.prototype.min=function(){var e=this.minNode(this._root);return e?e.key:null},r.prototype.max=function(){var e=this.maxNode(this._root);return e?e.key:null},r.prototype.isEmpty=function(){return null===this._root},n.size.get=function(){return this._size},r.createTree=function(e,t,n,i,o){return new r(n,o).load(e,t,i)},Object.defineProperties(r.prototype,n);var i=0,o=1,a=2,s=3,l=0,h=1,u=2,p=3;function c(e,t,r){null===t?(e.inOut=!1,e.otherInOut=!0):(e.isSubject===t.isSubject?(e.inOut=!t.inOut,e.otherInOut=t.otherInOut):(e.inOut=!t.otherInOut,e.otherInOut=t.isVertical()?!t.inOut:t.inOut),t&&(e.prevInResult=!d(t,r)||t.isVertical()?t.prevInResult:t)),e.inResult=d(e,r)}function d(e,t){switch(e.type){case i:switch(t){case l:return!e.otherInOut;case h:return e.otherInOut;case u:return e.isSubject&&e.otherInOut||!e.isSubject&&!e.otherInOut;case p:return!0}break;case a:return t===l||t===h;case s:return t===u;case o:return!1}return!1}var f=function(e,t,r,n,o){this.left=t,this.point=e,this.otherEvent=r,this.isSubject=n,this.type=o||i,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0};function g(e,t){return e[0]===t[0]&&e[1]===t[1]}function m(e,t,r){return(e[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(e[1]-r[1])}function y(e,t){var r=e.point,n=t.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(e,t,r,n){if(e.left!==t.left)return e.left?1:-1;if(0!==m(r,e.otherEvent.point,t.otherEvent.point))return e.isBelow(t.otherEvent.point)?-1:1;return!e.isSubject&&t.isSubject?1:-1}(e,t,r)}function _(e,t,r){var n=new f(t,!1,e,e.isSubject),i=new f(t,!0,e.otherEvent,e.isSubject);return g(e.point,e.otherEvent.point)&&console.warn("what is that, a collapsed segment?",e),n.contourId=i.contourId=e.contourId,y(i,e.otherEvent)>0&&(e.otherEvent.left=!0,i.left=!1),e.otherEvent.otherEvent=i,e.otherEvent=n,r.push(i),r.push(n),r}function v(e,t){return e[0]*t[1]-e[1]*t[0]}function b(e,t){return e[0]*t[0]+e[1]*t[1]}function L(e,t,r){var n=function(e,t,r,n,i){var o=[t[0]-e[0],t[1]-e[1]],a=[n[0]-r[0],n[1]-r[1]];function s(e,t,r){return[e[0]+t*r[0],e[1]+t*r[1]]}var l=[r[0]-e[0],r[1]-e[1]],h=v(o,a),u=h*h,p=b(o,o);if(u>0){var c=v(l,a)/h;if(c<0||c>1)return null;var d=v(l,o)/h;return d<0||d>1?null:0===c||1===c?i?null:[s(e,c,o)]:0===d||1===d?i?null:[s(r,d,a)]:[s(e,c,o)]}if((u=(h=v(l,o))*h)>0)return null;var f=b(o,l)/p,g=f+b(o,a)/p,m=Math.min(f,g),y=Math.max(f,g);return m<=1&&y>=0?1===m?i?null:[s(e,m>0?m:0,o)]:0===y?i?null:[s(e,y<1?y:1,o)]:i&&0===m&&1===y?null:[s(e,m>0?m:0,o),s(e,y<1?y:1,o)]:null}(e.point,e.otherEvent.point,t.point,t.otherEvent.point),i=n?n.length:0;if(0===i)return 0;if(1===i&&(g(e.point,t.point)||g(e.otherEvent.point,t.otherEvent.point)))return 0;if(2===i&&e.isSubject===t.isSubject)return 0;if(1===i)return g(e.point,n[0])||g(e.otherEvent.point,n[0])||_(e,n[0],r),g(t.point,n[0])||g(t.otherEvent.point,n[0])||_(t,n[0],r),1;var l=[],h=!1,u=!1;return g(e.point,t.point)?h=!0:1===y(e,t)?l.push(t,e):l.push(e,t),g(e.otherEvent.point,t.otherEvent.point)?u=!0:1===y(e.otherEvent,t.otherEvent)?l.push(t.otherEvent,e.otherEvent):l.push(e.otherEvent,t.otherEvent),h&&u||h?(t.type=o,e.type=t.inOut===e.inOut?a:s,h&&!u&&_(l[1].otherEvent,l[0].point,r),2):u?(_(l[0],l[1].point,r),3):l[0]!==l[3].otherEvent?(_(l[0],l[1].point,r),_(l[1],l[2].point,r),3):(_(l[0],l[1].point,r),_(l[3].otherEvent,l[2].point,r),3)}function k(e,t){if(e===t)return 0;if(0!==m(e.point,e.otherEvent.point,t.point)||0!==m(e.point,e.otherEvent.point,t.otherEvent.point))return g(e.point,t.point)?e.isBelow(t.otherEvent.point)?-1:1:e.point[0]===t.point[0]?e.point[1]<t.point[1]?-1:1:1===y(e,t)?t.isAbove(e.point)?-1:1:e.isBelow(t.point)?-1:1;if(e.isSubject!==t.isSubject)return e.isSubject?-1:1;var r=e.point,n=t.point;return r[0]===n[0]&&r[1]===n[1]?(r=e.otherEvent.point,n=t.otherEvent.point,r[0]===n[0]&&r[1]===n[1]?0:e.contourId>t.contourId?1:-1):1===y(e,t)?1:-1}function w(e,t,r,n){var i=e+1,o=t.length;if(i>o-1)return e-1;for(var a=t[e].point,s=t[i].point;i<o&&s[0]===a[0]&&s[1]===a[1];){if(!r[i])return i;s=t[++i].point}for(i=e-1;r[i]&&i>=n;)i--;return i}function M(e,t){var r,n,i,o=function(e){var t,r,n,i,o=[];for(r=0,n=e.length;r<n;r++)((t=e[r]).left&&t.inResult||!t.left&&t.otherEvent.inResult)&&o.push(t);for(var a=!1;!a;)for(a=!0,r=0,n=o.length;r<n;r++)r+1<n&&1===y(o[r],o[r+1])&&(i=o[r],o[r]=o[r+1],o[r+1]=i,a=!1);for(r=0,n=o.length;r<n;r++)(t=o[r]).pos=r;for(r=0,n=o.length;r<n;r++)(t=o[r]).left||(i=t.pos,t.pos=t.otherEvent.pos,t.otherEvent.pos=i);return o}(e),a={},s=[];for(r=0,n=o.length;r<n;r++)if(!a[r]){var l=[[]];o[r].isExteriorRing?t===u&&!o[r].isSubject&&s.length>1?s[s.length-1].push(l[0]):s.push(l):t!==u||o[r].isSubject||0!==s.length?0===s.length?s.push([[l]]):s[s.length-1].push(l[0]):s.push(l);var h=s.length-1,p=r,c=o[r].point;for(l[0].push(c);p>=r;)i=o[p],a[p]=!0,i.left?(i.resultInOut=!1,i.contourId=h):(i.otherEvent.resultInOut=!0,i.otherEvent.contourId=h),a[p=i.pos]=!0,l[0].push(o[p].point),p=w(p,o,a,r);i=o[p=-1===p?r:p],a[p]=a[i.pos]=!0,i.otherEvent.resultInOut=!0,i.otherEvent.contourId=h}return s}f.prototype.isBelow=function(e){var t=this.point,r=this.otherEvent.point;return this.left?(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])>0:(r[0]-e[0])*(t[1]-e[1])-(t[0]-e[0])*(r[1]-e[1])>0},f.prototype.isAbove=function(e){return!this.isBelow(e)},f.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},f.prototype.clone=function(){var e=new f(this.point,this.left,this.otherEvent,this.isSubject,this.type);return e.inResult=this.inResult,e.prevInResult=this.prevInResult,e.isExteriorRing=this.isExteriorRing,e.inOut=this.inOut,e.otherInOut=this.otherInOut,e};var E=x,S=x;function x(e,t){if(!(this instanceof x))return new x(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||P,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function P(e,t){return e<t?-1:e>t?1:0}x.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0===this.length)return undefined;var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var i=e-1>>1,o=t[i];if(r(n,o)>=0)break;t[e]=o,e=i}t[e]=n},_down:function(e){for(var t=this.data,r=this.compare,n=this.length>>1,i=t[e];e<n;){var o=1+(e<<1),a=o+1,s=t[o];if(a<this.length&&r(t[a],s)<0&&(o=a,s=t[a]),r(s,i)>=0)break;t[e]=s,e=o}t[e]=i}},E["default"]=S;var I=Math.max,C=Math.min,O=0;function T(e,t,r,n,i,o){var a,s,l,h,u,p;for(a=0,s=e.length-1;a<s;a++)if(l=e[a],h=e[a+1],u=new f(l,!1,undefined,t),p=new f(h,!1,u,t),u.otherEvent=p,l[0]!==h[0]||l[1]!==h[1]){u.contourId=p.contourId=r,o||(u.isExteriorRing=!1,p.isExteriorRing=!1),y(u,p)>0?p.left=!0:u.left=!0;var c=l[0],d=l[1];i[0]=C(i[0],c),i[1]=C(i[1],d),i[2]=I(i[2],c),i[3]=I(i[3],d),n.push(u),n.push(p)}}var R=[];function D(e,t,n){"number"==typeof e[0][0][0]&&(e=[e]),"number"==typeof t[0][0][0]&&(t=[t]);var i=function(e,t,r){var n=null;return e.length*t.length==0&&(r===l?n=R:r===u?n=e:r!==h&&r!==p||(n=0===e.length?t:e)),n}(e,t,n);if(i)return i===R?null:i;var o=[Infinity,Infinity,-Infinity,-Infinity],a=[Infinity,Infinity,-Infinity,-Infinity],s=function(e,t,r,n,i){var o,a,s,l,h,p,c=new E(null,y);for(s=0,l=e.length;s<l;s++)for(h=0,p=(o=e[s]).length;h<p;h++)(a=0===h)&&O++,T(o[h],!0,O,c,r,a);for(s=0,l=t.length;s<l;s++)for(h=0,p=(o=t[s]).length;h<p;h++)a=0===h,i===u&&(a=!1),a&&O++,T(o[h],!1,O,c,n,a);return c}(e,t,o,a,n);return(i=function(e,t,r,n,i){var o=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(i===l?o=R:i===u?o=e:i!==h&&i!==p||(o=e.concat(t))),o}(e,t,o,a,n))?i===R?null:i:M(function(e,t,n,i,o,a){for(var s,h,p,d=new r(k),f=[],g=Math.min(i[2],o[2]);0!==e.length;){var m=e.pop();if(f.push(m),a===l&&m.point[0]>g||a===u&&m.point[0]>i[2])break;if(m.left){h=s=d.insert(m),s=s!==(p=d.minNode())?d.prev(s):null,h=d.next(h);var y=s?s.key:null;if(c(m,y,a),h&&2===L(m,h.key,e)&&(c(m,y,a),c(m,h.key,a)),s&&2===L(s.key,m,e)){var _=s;c(y,(_=_!==p?d.prev(_):null)?_.key:null,a),c(m,y,a)}}else m=m.otherEvent,h=s=d.find(m),s&&h&&(s=s!==p?d.prev(s):null,h=d.next(h),d.remove(m),h&&s&&L(s.key,h.key,e))}return f}(s,0,0,o,a,n),n)}var j={UNION:h,DIFFERENCE:u,INTERSECTION:l,XOR:p};e.union=function(e,t){return D(e,t,h)},e.diff=function(e,t){return D(e,t,u)},e.xor=function(e,t){return D(e,t,p)},e.intersection=function(e,t){return D(e,t,l)},e.operations=j,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var i=n(r(35)),o=n(r(36)),a=r(5),s=r(37),l=r(13);function h(e){switch(e.type){case"Polygon":return o(e)>1?e:null;case"MultiPolygon":var t=[];if(l.flattenEach(e,function(e){o(e)>1&&t.push(e.geometry.coordinates)}),t.length)return{type:"MultiPolygon",coordinates:t}}}e.exports=function(e,t){var r=s.getGeom(e),n=s.getGeom(t),o=e.properties||{};if(r=h(r),n=h(n),!r)return null;if(!n)return a.feature(r,o);var l=i.diff(r.coordinates,n.coordinates);return 0===l.length?null:1===l.length?a.polygon(l[0],o):a.multiPolygon(l,o)}},function(e,t,r){!function(e,r){r(t)}(0,function(e){"use strict";function t(e,t){return e>t?1:e<t?-1:0}var r=function(e,r){void 0===e&&(e=t),void 0===r&&(r=!1),this._compare=e,this._root=null,this._size=0,this._noDuplicates=!!r},n={size:{configurable:!0}};r.prototype.rotateLeft=function(e){var t=e.right;t&&(e.right=t.left,t.left&&(t.left.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.left=e),e.parent=t},r.prototype.rotateRight=function(e){var t=e.left;t&&(e.left=t.right,t.right&&(t.right.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.right=e),e.parent=t},r.prototype._splay=function(e){for(;e.parent;){var t=e.parent;t.parent?t.left===e&&t.parent.left===t?(this.rotateRight(t.parent),this.rotateRight(t)):t.right===e&&t.parent.right===t?(this.rotateLeft(t.parent),this.rotateLeft(t)):t.left===e&&t.parent.right===t?(this.rotateRight(t),this.rotateLeft(t)):(this.rotateLeft(t),this.rotateRight(t)):t.left===e?this.rotateRight(t):this.rotateLeft(t)}},r.prototype.splay=function(e){for(var t,r,n,i,o;e.parent;)(r=(t=e.parent).parent)&&r.parent?((n=r.parent).left===r?n.left=e:n.right=e,e.parent=n):(e.parent=null,this._root=e),i=e.left,o=e.right,e===t.left?(r&&(r.left===t?(t.right?(r.left=t.right,r.left.parent=r):r.left=null,t.right=r,r.parent=t):(i?(r.right=i,i.parent=r):r.right=null,e.left=r,r.parent=e)),o?(t.left=o,o.parent=t):t.left=null,e.right=t,t.parent=e):(r&&(r.right===t?(t.left?(r.right=t.left,r.right.parent=r):r.right=null,t.left=r,r.parent=t):(o?(r.left=o,o.parent=r):r.left=null,e.right=r,r.parent=e)),i?(t.right=i,i.parent=t):t.right=null,e.left=t,t.parent=e)},r.prototype.replace=function(e,t){e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.parent=e.parent)},r.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},r.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},r.prototype.insert=function(e,t){var r=this._root,n=null,i=this._compare;if(this._noDuplicates)for(;r;){if(n=r,0===i(r.key,e))return;r=i(r.key,e)<0?r.right:r.left}else for(;r;)n=r,r=i(r.key,e)<0?r.right:r.left;return r={key:e,data:t,left:null,right:null,parent:n},n?i(n.key,r.key)<0?n.right=r:n.left=r:this._root=r,this.splay(r),this._size++,r},r.prototype.find=function(e){for(var t=this._root,r=this._compare;t;){var n=r(t.key,e);if(n<0)t=t.right;else{if(!(n>0))return t;t=t.left}}return null},r.prototype.contains=function(e){for(var t=this._root,r=this._compare;t;){var n=r(e,t.key);if(0===n)return!0;t=n<0?t.left:t.right}return!1},r.prototype.remove=function(e){var t=this.find(e);if(!t)return!1;if(this.splay(t),t.left)if(t.right){var r=this.minNode(t.right);r.parent!==t&&(this.replace(r,r.right),r.right=t.right,r.right.parent=r),this.replace(t,r),r.left=t.left,r.left.parent=r}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},r.prototype.removeNode=function(e){if(!e)return!1;if(this.splay(e),e.left)if(e.right){var t=this.minNode(e.right);t.parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},r.prototype.erase=function(e){var t=this.find(e);if(t){this.splay(t);var r=t.left,n=t.right,i=null;r&&(r.parent=null,i=this.maxNode(r),this.splay(i),this._root=i),n&&(r?i.right=n:this._root=n,n.parent=i),this._size--}},r.prototype.pop=function(){var e=this._root,t=null;if(e){for(;e.left;)e=e.left;t={key:e.key,data:e.data},this.remove(e.key)}return t},r.prototype.next=function(e){var t=e;if(t)if(t.right)for(t=t.right;t&&t.left;)t=t.left;else for(t=e.parent;t&&t.right===e;)e=t,t=t.parent;return t},r.prototype.prev=function(e){var t=e;if(t)if(t.left)for(t=t.left;t&&t.right;)t=t.right;else for(t=e.parent;t&&t.left===e;)e=t,t=t.parent;return t},r.prototype.forEach=function(e){for(var t=this._root,r=[],n=!1,i=0;!n;)t?(r.push(t),t=t.left):r.length>0?(e(t=r.pop(),i++),t=t.right):n=!0;return this},r.prototype.range=function(e,t,r,n){for(var i=[],o=this._compare,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,t)>0)break;if(o(a.key,e)>=0&&r.call(n,a))return this;a=a.right}return this},r.prototype.keys=function(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.key),e=e.right):n=!0;return r},r.prototype.values=function(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.data),e=e.right):n=!0;return r},r.prototype.at=function(e){for(var t=this._root,r=[],n=!1,i=0;!n;)if(t)r.push(t),t=t.left;else if(r.length>0){if(t=r.pop(),i===e)return t;i++,t=t.right}else n=!0;return null},r.prototype.load=function(e,t,r){if(void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var n=e.length;return r&&function i(e,t,r,n,o){if(r>=n)return;var a=e[r+n>>1];var s=r-1;var l=n+1;for(;;){do{s++}while(o(e[s],a)<0);do{l--}while(o(e[l],a)>0);if(s>=l)break;var h=e[s];e[s]=e[l],e[l]=h,h=t[s],t[s]=t[l],t[l]=h}i(e,t,r,l,o);i(e,t,l+1,n,o)}(e,t,0,n-1,this._compare),this._root=function o(e,t,r,n,i){var a=i-n;if(a>0){var s=n+Math.floor(a/2),l=t[s],h=r[s],u={key:l,data:h,parent:e};return u.left=o(u,t,r,n,s),u.right=o(u,t,r,s+1,i),u}return null}(null,e,t,0,n),this._size=n,this},r.prototype.min=function(){var e=this.minNode(this._root);return e?e.key:null},r.prototype.max=function(){var e=this.maxNode(this._root);return e?e.key:null},r.prototype.isEmpty=function(){return null===this._root},n.size.get=function(){return this._size},r.createTree=function(e,t,n,i,o){return new r(n,o).load(e,t,i)},Object.defineProperties(r.prototype,n);var i=0,o=1,a=2,s=3,l=0,h=1,u=2,p=3;function c(e,t,r){null===t?(e.inOut=!1,e.otherInOut=!0):(e.isSubject===t.isSubject?(e.inOut=!t.inOut,e.otherInOut=t.otherInOut):(e.inOut=!t.otherInOut,e.otherInOut=t.isVertical()?!t.inOut:t.inOut),t&&(e.prevInResult=!d(t,r)||t.isVertical()?t.prevInResult:t)),e.inResult=d(e,r)}function d(e,t){switch(e.type){case i:switch(t){case l:return!e.otherInOut;case h:return e.otherInOut;case u:return e.isSubject&&e.otherInOut||!e.isSubject&&!e.otherInOut;case p:return!0}break;case a:return t===l||t===h;case s:return t===u;case o:return!1}return!1}var f=function(e,t,r,n,o){this.left=t,this.point=e,this.otherEvent=r,this.isSubject=n,this.type=o||i,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1,this.isExteriorRing=!0};function g(e,t){return e[0]===t[0]&&e[1]===t[1]}function m(e,t,r){return(e[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(e[1]-r[1])}function y(e,t){var r=e.point,n=t.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(e,t,r,n){if(e.left!==t.left)return e.left?1:-1;if(0!==m(r,e.otherEvent.point,t.otherEvent.point))return e.isBelow(t.otherEvent.point)?-1:1;return!e.isSubject&&t.isSubject?1:-1}(e,t,r)}function _(e,t,r){var n=new f(t,!1,e,e.isSubject),i=new f(t,!0,e.otherEvent,e.isSubject);return g(e.point,e.otherEvent.point)&&console.warn("what is that, a collapsed segment?",e),n.contourId=i.contourId=e.contourId,y(i,e.otherEvent)>0&&(e.otherEvent.left=!0,i.left=!1),e.otherEvent.otherEvent=i,e.otherEvent=n,r.push(i),r.push(n),r}function v(e,t){return e[0]*t[1]-e[1]*t[0]}function b(e,t){return e[0]*t[0]+e[1]*t[1]}function L(e,t,r){var n=function(e,t,r,n,i){var o=[t[0]-e[0],t[1]-e[1]],a=[n[0]-r[0],n[1]-r[1]];function s(e,t,r){return[e[0]+t*r[0],e[1]+t*r[1]]}var l=[r[0]-e[0],r[1]-e[1]],h=v(o,a),u=h*h,p=b(o,o);if(u>0){var c=v(l,a)/h;if(c<0||c>1)return null;var d=v(l,o)/h;return d<0||d>1?null:0===c||1===c?i?null:[s(e,c,o)]:0===d||1===d?i?null:[s(r,d,a)]:[s(e,c,o)]}if((u=(h=v(l,o))*h)>0)return null;var f=b(o,l)/p,g=f+b(o,a)/p,m=Math.min(f,g),y=Math.max(f,g);return m<=1&&y>=0?1===m?i?null:[s(e,m>0?m:0,o)]:0===y?i?null:[s(e,y<1?y:1,o)]:i&&0===m&&1===y?null:[s(e,m>0?m:0,o),s(e,y<1?y:1,o)]:null}(e.point,e.otherEvent.point,t.point,t.otherEvent.point),i=n?n.length:0;if(0===i)return 0;if(1===i&&(g(e.point,t.point)||g(e.otherEvent.point,t.otherEvent.point)))return 0;if(2===i&&e.isSubject===t.isSubject)return 0;if(1===i)return g(e.point,n[0])||g(e.otherEvent.point,n[0])||_(e,n[0],r),g(t.point,n[0])||g(t.otherEvent.point,n[0])||_(t,n[0],r),1;var l=[],h=!1,u=!1;return g(e.point,t.point)?h=!0:1===y(e,t)?l.push(t,e):l.push(e,t),g(e.otherEvent.point,t.otherEvent.point)?u=!0:1===y(e.otherEvent,t.otherEvent)?l.push(t.otherEvent,e.otherEvent):l.push(e.otherEvent,t.otherEvent),h&&u||h?(t.type=o,e.type=t.inOut===e.inOut?a:s,h&&!u&&_(l[1].otherEvent,l[0].point,r),2):u?(_(l[0],l[1].point,r),3):l[0]!==l[3].otherEvent?(_(l[0],l[1].point,r),_(l[1],l[2].point,r),3):(_(l[0],l[1].point,r),_(l[3].otherEvent,l[2].point,r),3)}function k(e,t){if(e===t)return 0;if(0!==m(e.point,e.otherEvent.point,t.point)||0!==m(e.point,e.otherEvent.point,t.otherEvent.point))return g(e.point,t.point)?e.isBelow(t.otherEvent.point)?-1:1:e.point[0]===t.point[0]?e.point[1]<t.point[1]?-1:1:1===y(e,t)?t.isAbove(e.point)?-1:1:e.isBelow(t.point)?-1:1;if(e.isSubject!==t.isSubject)return e.isSubject?-1:1;var r=e.point,n=t.point;return r[0]===n[0]&&r[1]===n[1]?(r=e.otherEvent.point,n=t.otherEvent.point,r[0]===n[0]&&r[1]===n[1]?0:e.contourId>t.contourId?1:-1):1===y(e,t)?1:-1}function w(e,t,r,n){var i=e+1,o=t.length;if(i>o-1)return e-1;for(var a=t[e].point,s=t[i].point;i<o&&s[0]===a[0]&&s[1]===a[1];){if(!r[i])return i;s=t[++i].point}for(i=e-1;r[i]&&i>=n;)i--;return i}function M(e,t){var r,n,i,o=function(e){var t,r,n,i,o=[];for(r=0,n=e.length;r<n;r++)((t=e[r]).left&&t.inResult||!t.left&&t.otherEvent.inResult)&&o.push(t);for(var a=!1;!a;)for(a=!0,r=0,n=o.length;r<n;r++)r+1<n&&1===y(o[r],o[r+1])&&(i=o[r],o[r]=o[r+1],o[r+1]=i,a=!1);for(r=0,n=o.length;r<n;r++)(t=o[r]).pos=r;for(r=0,n=o.length;r<n;r++)(t=o[r]).left||(i=t.pos,t.pos=t.otherEvent.pos,t.otherEvent.pos=i);return o}(e),a={},s=[];for(r=0,n=o.length;r<n;r++)if(!a[r]){var l=[[]];o[r].isExteriorRing?t===u&&!o[r].isSubject&&s.length>1?s[s.length-1].push(l[0]):s.push(l):t!==u||o[r].isSubject||0!==s.length?0===s.length?s.push([[l]]):s[s.length-1].push(l[0]):s.push(l);var h=s.length-1,p=r,c=o[r].point;for(l[0].push(c);p>=r;)i=o[p],a[p]=!0,i.left?(i.resultInOut=!1,i.contourId=h):(i.otherEvent.resultInOut=!0,i.otherEvent.contourId=h),a[p=i.pos]=!0,l[0].push(o[p].point),p=w(p,o,a,r);i=o[p=-1===p?r:p],a[p]=a[i.pos]=!0,i.otherEvent.resultInOut=!0,i.otherEvent.contourId=h}return s}f.prototype.isBelow=function(e){var t=this.point,r=this.otherEvent.point;return this.left?(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])>0:(r[0]-e[0])*(t[1]-e[1])-(t[0]-e[0])*(r[1]-e[1])>0},f.prototype.isAbove=function(e){return!this.isBelow(e)},f.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},f.prototype.clone=function(){var e=new f(this.point,this.left,this.otherEvent,this.isSubject,this.type);return e.inResult=this.inResult,e.prevInResult=this.prevInResult,e.isExteriorRing=this.isExteriorRing,e.inOut=this.inOut,e.otherInOut=this.otherInOut,e};var E=x,S=x;function x(e,t){if(!(this instanceof x))return new x(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||P,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function P(e,t){return e<t?-1:e>t?1:0}x.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0===this.length)return undefined;var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var i=e-1>>1,o=t[i];if(r(n,o)>=0)break;t[e]=o,e=i}t[e]=n},_down:function(e){for(var t=this.data,r=this.compare,n=this.length>>1,i=t[e];e<n;){var o=1+(e<<1),a=o+1,s=t[o];if(a<this.length&&r(t[a],s)<0&&(o=a,s=t[a]),r(s,i)>=0)break;t[e]=s,e=o}t[e]=i}},E["default"]=S;var I=Math.max,C=Math.min,O=0;function T(e,t,r,n,i,o){var a,s,l,h,u,p;for(a=0,s=e.length-1;a<s;a++)if(l=e[a],h=e[a+1],u=new f(l,!1,undefined,t),p=new f(h,!1,u,t),u.otherEvent=p,l[0]!==h[0]||l[1]!==h[1]){u.contourId=p.contourId=r,o||(u.isExteriorRing=!1,p.isExteriorRing=!1),y(u,p)>0?p.left=!0:u.left=!0;var c=l[0],d=l[1];i[0]=C(i[0],c),i[1]=C(i[1],d),i[2]=I(i[2],c),i[3]=I(i[3],d),n.push(u),n.push(p)}}var R=[];function D(e,t,n){"number"==typeof e[0][0][0]&&(e=[e]),"number"==typeof t[0][0][0]&&(t=[t]);var i=function(e,t,r){var n=null;return e.length*t.length==0&&(r===l?n=R:r===u?n=e:r!==h&&r!==p||(n=0===e.length?t:e)),n}(e,t,n);if(i)return i===R?null:i;var o=[Infinity,Infinity,-Infinity,-Infinity],a=[Infinity,Infinity,-Infinity,-Infinity],s=function(e,t,r,n,i){var o,a,s,l,h,p,c=new E(null,y);for(s=0,l=e.length;s<l;s++)for(h=0,p=(o=e[s]).length;h<p;h++)(a=0===h)&&O++,T(o[h],!0,O,c,r,a);for(s=0,l=t.length;s<l;s++)for(h=0,p=(o=t[s]).length;h<p;h++)a=0===h,i===u&&(a=!1),a&&O++,T(o[h],!1,O,c,n,a);return c}(e,t,o,a,n);return(i=function(e,t,r,n,i){var o=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(i===l?o=R:i===u?o=e:i!==h&&i!==p||(o=e.concat(t))),o}(e,t,o,a,n))?i===R?null:i:M(function(e,t,n,i,o,a){for(var s,h,p,d=new r(k),f=[],g=Math.min(i[2],o[2]);0!==e.length;){var m=e.pop();if(f.push(m),a===l&&m.point[0]>g||a===u&&m.point[0]>i[2])break;if(m.left){h=s=d.insert(m),s=s!==(p=d.minNode())?d.prev(s):null,h=d.next(h);var y=s?s.key:null;if(c(m,y,a),h&&2===L(m,h.key,e)&&(c(m,y,a),c(m,h.key,a)),s&&2===L(s.key,m,e)){var _=s;c(y,(_=_!==p?d.prev(_):null)?_.key:null,a),c(m,y,a)}}else m=m.otherEvent,h=s=d.find(m),s&&h&&(s=s!==p?d.prev(s):null,h=d.next(h),d.remove(m),h&&s&&L(s.key,h.key,e))}return f}(s,0,0,o,a,n),n)}var j={UNION:h,DIFFERENCE:u,INTERSECTION:l,XOR:p};e.union=function(e,t){return D(e,t,h)},e.diff=function(e,t){return D(e,t,u)},e.xor=function(e,t){return D(e,t,p)},e.intersection=function(e,t){return D(e,t,l)},e.operations=j,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=6378137;function o(e){var t=0;if(e&&e.length>0){t+=Math.abs(a(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(a(e[r]))}return t}function a(e){var t,r,n,o,a,l,h=0,u=e.length;if(u>2){for(l=0;l<u;l++)l===u-2?(n=u-2,o=u-1,a=0):l===u-1?(n=u-1,o=0,a=1):(n=l,o=l+1,a=l+2),t=e[n],r=e[o],h+=(s(e[a][0])-s(t[0]))*Math.sin(s(r[1]));h=h*i*i/2}return h}function s(e){return e*Math.PI/180}t["default"]=function(e){return n.geomReduce(e,function(e,t){return e+function(e){var t,r=0;switch(e.type){case"Polygon":return o(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)r+=o(e.coordinates[t]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5);t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function i(e){if(e.length>1&&n.isNumber(e[0])&&n.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return i(e[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,i=e.features;n<i.length;n++){var o=i[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+o.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},function(e,t,r){"use strict";const n={_initDraggableLayer(){this._tempDragCoord=null;const e=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.addClass(e,"leaflet-pm-draggable"),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0,this._layer.on("mousedown",this._dragMixinOnMouseDown,this)},_dragMixinOnMouseUp(){const e=this._layer._path?this._layer._path:this._layer._renderer._container;return this._originalMapDragState&&this._layer._map.dragging.enable(),this._safeToCacheDragState=!0,this._layer._map.off("mousemove",this._dragMixinOnMouseMove,this),this._layer.off("mouseup",this._dragMixinOnMouseUp,this),!!this._dragging&&(this._initMarkers(),window.setTimeout(()=>{this._dragging=!1,L.DomUtil.removeClass(e,"leaflet-pm-dragging"),this._layer.fire("pm:dragend"),this._fireEdit()},10),!0)},_dragMixinOnMouseMove(e){const t=this._layer._path?this._layer._path:this._layer._renderer._container;this._dragging||(this._dragging=!0,L.DomUtil.addClass(t,"leaflet-pm-dragging"),this._layer.bringToFront(),this._originalMapDragState&&this._layer._map.dragging.disable(),this._markerGroup.clearLayers(),this._layer.fire("pm:dragstart")),this._onLayerDrag(e)},_dragMixinOnMouseDown(e){e.originalEvent.button>0||(this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=e.latlng,this._layer.on("mouseup",this._dragMixinOnMouseUp,this),this._layer._map.on("mousemove",this._dragMixinOnMouseMove,this))},dragging(){return this._dragging},_onLayerDrag(e){const{latlng:t}=e,r=t.lat-this._tempDragCoord.lat,n=t.lng-this._tempDragCoord.lng,i=e=>e.map(e=>Array.isArray(e)?i(e):{lat:e.lat+r,lng:e.lng+n}),o=i(this._layer._latlngs);this._layer.setLatLngs(o).redraw(),this._tempDragCoord=t,this._layer.fire("pm:drag")}};t.a=n},function(e,t,r){"use strict";r(1).a.LayerGroup=L.Class.extend({initialize(e){this._layerGroup=e,this._layers=this.findLayers(),this._layers.forEach(e=>this._initLayer(e)),this._layerGroup.on("layeradd",e=>{e.target._pmTempLayer||(this._layers=this.findLayers(),e.layer.pm&&this._initLayer(e.layer),e.target.pm.enabled()&&this.enable(this.getOptions()))})},findLayers(){let e=this._layerGroup.getLayers();return e=(e=(e=e.filter(e=>!(e instanceof L.LayerGroup))).filter(e=>!!e.pm)).filter(e=>!e._pmTempLayer)},_initLayer(e){["pm:edit","pm:update","pm:remove","pm:dragstart","pm:drag","pm:dragend","pm:snap","pm:unsnap","pm:cut","pm:intersect","pm:raiseMarkers","pm:markerdragend","pm:markerdragstart","pm:vertexadded","pm:vertexremoved","pm:centerplaced"].forEach(t=>{e.on(t,this._fireEvent,this)}),e.pm._layerGroup=this._layerGroup},_fireEvent(e){this._layerGroup.fireEvent(e.type,e)},toggleEdit(e){this._options=e,this._layers.forEach(t=>{t.pm.toggleEdit(e)})},enable(e){this._options=e,this._layers.forEach(t=>{t.pm.enable(e)})},disable(){this._layers.forEach(e=>{e.pm.disable()})},enabled(){return!!this._layers.find(e=>e.pm.enabled())},dragging(){return!!this._layers.find(e=>e.pm.dragging())},getOptions(){return this._options}})},function(e,t,r){"use strict";var n=r(1);n.a.Marker=n.a.extend({initialize(e){this._layer=e,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},toggleEdit(e){this.enabled()?this.disable():this.enable(e)},enable(e={draggable:!0,snappable:!0}){L.Util.setOptions(this,e),this._map=this._layer._map,this.enabled()||(this._enabled=!0,this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this),this.options.draggable&&this._layer.dragging.enable(),this.options.snappable&&this._initSnappableMarkers())},enabled(){return this._enabled},disable(){this._enabled=!1,this._layer.dragging.disable(),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._layer.fire("pm:update",{}),this._layerEdited=!1},_removeMarker(e){const t=e.target;t.remove(),t.fire("pm:remove")},_onDragEnd(e){e.target.fire("pm:edit"),this._layerEdited=!0},_initSnappableMarkers(){const e=this._layer;this.options.snapDistance=this.options.snapDistance||30,e.off("drag",this._handleSnapping,this),e.on("drag",this._handleSnapping,this),e.off("dragend",this._cleanupSnapping,this),e.on("dragend",this._cleanupSnapping,this),e.off("pm:dragstart",this._unsnap,this),e.on("pm:dragstart",this._unsnap,this)}})},function(e,t,r){"use strict";var n=r(11),i=r.n(n),o=r(42),a=r.n(o),s=r(1);s.a.Line=s.a.extend({initialize(e){this._layer=e,this._enabled=!1},toggleEdit(e){this.enabled()?this.disable():this.enable(e)},enable(e){L.Util.setOptions(this,e),this._map=this._layer._map,this._map&&(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this._layer.on("remove",this._onLayerRemove,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.draggable&&this._initDraggableLayer(),this.options.allowSelfIntersection||this._handleLayerStyle(),this._map.on("dragend",function(e){this._toggleMarkerVisibility()}.bind(this)),this._map.on("zoomend",function(e){this._toggleMarkerVisibility()}.bind(this)))},_onLayerRemove(e){this.disable(e.target)},enabled(){return this._enabled},disable(e=this._layer){if(!this.enabled())return!1;if(e.pm._dragging)return!1;e.pm._enabled=!1,e.pm._markerGroup.clearLayers(),e.off("mousedown"),e.off("mouseup"),this._layer.off("remove",this._onLayerRemove),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval);const t=e._path?e._path:this._layer._renderer._container;return L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this.hasSelfIntersection()&&L.DomUtil.removeClass(t,"leaflet-pm-invalid"),this._layerEdited&&this._layer.fire("pm:update",{}),this._layerEdited=!1,!0},hasSelfIntersection(){return i()(this._layer.toGeoJSON()).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(e){const t=this._layer._path?this._layer._path:this._layer._renderer._container;if(this.hasSelfIntersection()){if(L.DomUtil.hasClass(t,"leaflet-pm-invalid"))return;e?(L.DomUtil.addClass(t,"leaflet-pm-invalid"),window.setTimeout(()=>{L.DomUtil.removeClass(t,"leaflet-pm-invalid")},200)):L.DomUtil.addClass(t,"leaflet-pm-invalid"),this._layer.fire("pm:intersect",{intersection:i()(this._layer.toGeoJSON())})}else L.DomUtil.removeClass(t,"leaflet-pm-invalid")},_initMarkers(){const e=this._map,t=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,e.addLayer(this._markerGroup);const r=e=>{if(Array.isArray(e[0]))return e.map(r,this);const t=e.map(this._createMarker,this);return e.map((r,n)=>{const i=this.isPolygon()?(n+1)%e.length:n+1;return this._createMiddleMarker(t[n],t[i])}),t};this._markers=r(t),this.options.snappable&&this._initSnappableMarkers(),this._toggleMarkerVisibility()},_createMarker(e){const t=new L.Marker(e,{draggable:!this.options.preventVertexEdit,icon:L.divIcon({className:"marker-icon"})});return t._pmTempLayer=!0,t.on("dragstart",this._onMarkerDragStart,this),t.on("move",this._onMarkerDrag,this),t.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||t.on("contextmenu",this._removeMarker,this),t},_createMiddleMarker(e,t){if(!e||!t)return!1;const r=this._calcMiddleLatLng(e.getLatLng(),t.getLatLng()),n=this._createMarker(r),i=L.divIcon({className:"marker-icon marker-icon-middle"});return n.setIcon(i),e._middleMarkerNext=n,t._middleMarkerPrev=n,n.on("click",()=>{const r=L.divIcon({className:"marker-icon"});n.setIcon(r),this._addMarker(n,e,t)}),n.on("movestart",()=>{n.on("moveend",()=>{const e=L.divIcon({className:"marker-icon"});n.setIcon(e),n.off("moveend")}),this._addMarker(n,e,t)}),n},_toggleMarkerVisibility:function(){if(this.enabled())for(var e=this._map.getBounds(),t=function(t){if(t){var r=!0;0==e.contains(t.getLatLng())&&(r=!1),this._map.options.lineEditZoomThreshold&&this._map.getZoom()<this._map.options.lineEditZoomThreshold&&(r=!1),1==r?this._markerGroup.addLayer(t):this._markerGroup.removeLayer(t)}},r=0;r<this._markers.length;r++){var n=this._markers[r];if(Array.isArray(n))for(var i=0;i<n.length;i++){var o=n[i];t.bind(this,o)()}else t.bind(this,n)(),t.bind(this,n._middleMarkerNext)(),t.bind(this,n._middleMarkerPrev)()}},_addMarker(e,t,r){e.off("movestart"),e.off("click");const n=e.getLatLng(),i=this._layer._latlngs,{indexPath:o,index:s,parentPath:l}=this.findDeepMarkerIndex(this._markers,r),h=o.length>1?a()(i,l):i,u=o.length>1?a()(this._markers,l):this._markers;h.splice(s,0,n),u.splice(s,0,e),this._layer.setLatLngs(i),this._createMiddleMarker(t,e),this._createMiddleMarker(e,r),this._fireEdit(),this._layer.fire("pm:vertexadded",{layer:this._layer,marker:e,indexPath:o}),this.options.snappable&&this._initSnappableMarkers(),this._toggleMarkerVisibility()},_removeMarker(e){if(!this.options.allowSelfIntersection){const e=this._layer.getLatLngs();this._coordsBeforeEdit=JSON.parse(JSON.stringify(e))}const t=e.target,r=this._layer.getLatLngs(),{indexPath:n,index:i,parentPath:o}=this.findDeepMarkerIndex(this._markers,t);if(!n)return;const s=n.length>1?a()(r,o):r,l=n.length>1?a()(this._markers,o):this._markers;let h,u;if(s.splice(i,1),this._layer.setLatLngs(r),s.length<=1&&(s.splice(0,s.length),this._layer.setLatLngs(r),this.disable(),this.enable(this.options)),this.isEmptyDeep(r)&&this._layer.remove(),t._middleMarkerPrev&&this._markerGroup.removeLayer(t._middleMarkerPrev),t._middleMarkerNext&&this._markerGroup.removeLayer(t._middleMarkerNext),this._markerGroup.removeLayer(t),this.isPolygon()?(h=(i+1)%l.length,u=(i+(l.length-1))%l.length):(u=i-1<0?undefined:i-1,h=i+1>=l.length?undefined:i+1),h!==u){const e=l[u],t=l[h];this._createMiddleMarker(e,t)}l.splice(i,1),this._fireEdit(),this._layer.fire("pm:vertexremoved",{layer:this._layer,marker:t,indexPath:n}),this._toggleMarkerVisibility()},isEmptyDeep(e){const t=e=>e.filter(e=>![null,"",undefined].includes(e)).reduce((e,r)=>e.concat(Array.isArray(r)?t(r):r),[]);return!t(e).length},findDeepMarkerIndex(e,t){let r;const n=e=>(i,o)=>{const a=e.concat(o);return i._leaflet_id===t._leaflet_id?(r=a,!0):Array.isArray(i)&&i.some(n(a))};e.some(n([]));let i={};return r&&(i={indexPath:r,index:r[r.length-1],parentPath:r.slice(0,r.length-1)}),i},updatePolygonCoordsFromMarkerDrag(e){const t=this._layer.getLatLngs(),r=e.getLatLng(),{indexPath:n,index:i,parentPath:o}=this.findDeepMarkerIndex(this._markers,e);(n.length>1?a()(t,o):t).splice(i,1,r),this._layer.setLatLngs(t).redraw()},_onMarkerDrag(e){const t=e.target,{indexPath:r,index:n,parentPath:i}=this.findDeepMarkerIndex(this._markers,t);if(!r)return;this.updatePolygonCoordsFromMarkerDrag(t);const o=r.length>1?a()(this._markers,i):this._markers,s=(n+1)%o.length,l=(n+(o.length-1))%o.length,h=t.getLatLng(),u=o[l].getLatLng(),p=o[s].getLatLng();if(t._middleMarkerNext){const e=this._calcMiddleLatLng(h,p);t._middleMarkerNext.setLatLng(e)}if(t._middleMarkerPrev){const e=this._calcMiddleLatLng(h,u);t._middleMarkerPrev.setLatLng(e)}this.options.allowSelfIntersection||this._handleLayerStyle()},_onMarkerDragEnd(e){const t=e.target,{indexPath:r}=this.findDeepMarkerIndex(this._markers,t);if(!this.options.allowSelfIntersection&&this.hasSelfIntersection())return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),void this._handleLayerStyle();this._layer.fire("pm:markerdragend",{markerEvent:e,indexPath:r}),this._fireEdit()},_onMarkerDragStart(e){const t=e.target,{indexPath:r}=this.findDeepMarkerIndex(this._markers,t);this._layer.fire("pm:markerdragstart",{markerEvent:e,indexPath:r}),this.options.allowSelfIntersection||(this._coordsBeforeEdit=this._layer.getLatLngs())},_fireEdit(){this._layerEdited=!0,this._layer.fire("pm:edit")},_calcMiddleLatLng(e,t){const r=this._map,n=r.project(e),i=r.project(t);return r.unproject(n._add(i)._divideBy(2))}})},function(e,t,r){var n=r(43);e.exports=function(e,t,r){var i=null==e?undefined:n(e,t);return i===undefined?r:i}},function(e,t,r){var n=r(44),i=r(84);e.exports=function(e,t){for(var r=0,o=(t=n(t,e)).length;null!=e&&r<o;)e=e[i(t[r++])];return r&&r==o?e:undefined}},function(e,t,r){var n=r(6),i=r(45),o=r(51),a=r(81);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,r){var n=r(6),i=r(7),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,r(47))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(n){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(8),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=n?n.toStringTag:undefined;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=undefined;var n=!0}catch(l){}var i=a.call(e);return n&&(t?e[s]=r:delete e[s]),i}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){var n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=r(52)(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(n,function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)}),t});e.exports=o},function(e,t,r){var n=r(53),i=500;e.exports=function(e){var t=n(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}},function(e,t,r){var n=r(54),i="Expected a function";function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(o.Cache||n),r}o.Cache=n,e.exports=o},function(e,t,r){var n=r(55),i=r(76),o=r(78),a=r(79),s=r(80);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype["delete"]=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,r){var n=r(56),i=r(68),o=r(75);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},function(e,t,r){var n=r(57),i=r(64),o=r(65),a=r(66),s=r(67);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype["delete"]=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,r){var n=r(2);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t,r){var n=r(59),i=r(60),o=r(16),a=r(62),s=/^\[object .+?Constructor\]$/,l=Function.prototype,h=Object.prototype,u=l.toString,p=h.hasOwnProperty,c=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(n(e)?c:s).test(a(e))}},function(e,t,r){var n=r(14),i=r(16),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=n(e);return t==a||t==s||t==o||t==l}},function(e,t,r){var n=r(61),i=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t,r){var n=r(9)["__core-js_shared__"];e.exports=n},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},function(e,t){e.exports=function(e,t){return null==e?undefined:e[t]}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(2),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return r===i?undefined:r}return o.call(t,e)?t[e]:undefined}},function(e,t,r){var n=r(2),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?t[e]!==undefined:i.call(t,e)}},function(e,t,r){var n=r(2),i="__lodash_hash_undefined__";e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&t===undefined?i:t,this}},function(e,t,r){var n=r(69),i=r(70),o=r(72),a=r(73),s=r(74);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype["delete"]=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(3),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():i.call(t,r,1),--this.size,0))}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(3);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?undefined:t[r][1]}},function(e,t,r){var n=r(3);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(3);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},function(e,t,r){var n=r(15)(r(9),"Map");e.exports=n},function(e,t,r){var n=r(4);e.exports=function(e){var t=n(this,e)["delete"](e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(4);e.exports=function(e){return n(this,e).get(e)}},function(e,t,r){var n=r(4);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(4);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},function(e,t,r){var n=r(82);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){var n=r(8),i=r(83),o=r(6),a=r(7),s=1/0,l=n?n.prototype:undefined,h=l?l.toString:undefined;e.exports=function u(e){if("string"==typeof e)return e;if(o(e))return i(e,u)+"";if(a(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},function(e,t,r){var n=r(7),i=1/0;e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},function(e,t,r){"use strict";var n=r(1);n.a.Poly=n.a.Line.extend({})},function(e,t,r){"use strict";var n=r(1);n.a.Rectangle=n.a.Poly.extend({_initMarkers(){const e=this._map,t=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,e.addLayer(this._markerGroup),this._markers=[],this._markers[0]=t.map(this._createMarker,this),this._cornerMarkers=this._markers[0],this.options.snappable&&this._initSnappableMarkers()},_createMarker(e,t){const r=new L.Marker(e,{draggable:!this.options.preventVertexEdit,icon:L.divIcon({className:"marker-icon"})});return r._origLatLng=e,r._index=t,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("pm:snap",this._adjustRectangleForMarkerSnap,this),this.options.preventMarkerRemoval||r.on("contextmenu",this._removeMarker,this),this._markerGroup.addLayer(r),r},_removeMarker:()=>null,_onMarkerDragStart(e){const t=e.target,r=this._findCorners();t._oppositeCornerLatLng=r[(t._index+2)%4],t._snapped=!1,this._layer.fire("pm:markerdragstart",{markerEvent:e})},_onMarkerDrag(e){const t=e.target;t._index!==undefined&&(t._snapped||this._adjustRectangleForMarkerMove(t))},_onMarkerDragEnd(e){const t=this._findCorners();this._adjustAllMarkers(t),this._cornerMarkers.forEach(e=>{delete e._oppositeCornerLatLng}),this._layer.setLatLngs(t),this._layer.redraw(),this._layer.fire("pm:markerdragend",{markerEvent:e}),this._fireEdit()},_adjustRectangleForMarkerMove(e){L.extend(e._origLatLng,e._latlng);const t=e.getLatLng();this._layer.setBounds(L.latLngBounds(t,e._oppositeCornerLatLng)),this._adjustAdjacentMarkers(e),this._layer.redraw()},_adjustRectangleForMarkerSnap(e){if(!this.options.snappable)return;const t=e.target;this._adjustRectangleForMarkerMove(t)},_adjustAllMarkers(e){e.length&&4==e.length?this._cornerMarkers.forEach((t,r)=>{t.setLatLng(e[r])}):console.error("_adjustAllMarkers() requires an array of EXACTLY 4 LatLng coordinates")},_adjustAdjacentMarkers(e){if(!e||!e.getLatLng||!e._oppositeCornerLatLng)return void console.error("_adjustAdjacentMarkers() requires a valid Marker object");const t=e.getLatLng(),r=e._oppositeCornerLatLng,n=[];this._findCorners().forEach(e=>{e.equals(t)||e.equals(r)||n.push(e)});let i=0;2==n.length&&this._cornerMarkers.forEach(e=>{const o=e.getLatLng();o.equals(t)||o.equals(r)||(e.setLatLng(n[i]),i+=1)})},_findCorners(){const e=this._layer.getBounds();return[e.getNorthWest(),e.getNorthEast(),e.getSouthEast(),e.getSouthWest()]}})},function(e,t,r){"use strict";var n=r(1);n.a.Circle=n.a.extend({initialize(e){this._layer=e,this._enabled=!1},toggleEdit(e){this.enabled()?this.disable():this.enable(e)},enabled(){return this._enabled},enable(e){L.Util.setOptions(this,e),this._map=this._layer._map,this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this._layer.on("remove",e=>{this.disable(e.target)})},disable(e=this._layer){if(!this.enabled())return!1;if(e.pm._dragging)return!1;e.pm._enabled=!1,e.pm._layerGroup.clearLayers(),e.off("mousedown"),e.off("mouseup");const t=e._path?e._path:this._layer._renderer._container;return L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._layerEdited&&this._layer.fire("pm:update",{}),this._layerEdited=!1,!0},_initMarkers(){const e=this._map;this._layerGroup&&this._layerGroup.clearLayers(),this._layerGroup=new L.LayerGroup,e.addLayer(this._layerGroup);const t=this._layer.getLatLng(),r=this._layer._radius,n=this._getLatLngOnCircle(t,r);this._centerMarker=this._createCenterMarker(t),this._outerMarker=this._createOuterMarker(n),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker),this.options.snappable&&this._initSnappableMarkers()},_getLatLngOnCircle(e,t){const r=this._map.project(e),n=L.point(r.x+t,r.y);return this._map.unproject(n)},_resizeCircle(){this._syncHintLine(),this._syncCircleRadius()},_moveCircle(e){const t=e.latlng;this._layer.setLatLng(t);const r=this._layer._radius,n=this._getLatLngOnCircle(t,r);this._outerMarker.setLatLng(n),this._syncHintLine(),this._layer.fire("pm:centerplaced",{layer:this._layer,latlng:t})},_onMarkerDragStart(e){this._layer.fire("pm:markerdragstart",{markerEvent:e})},_onMarkerDragEnd(e){this._fireEdit(),this._layer.fire("pm:markerdragend",{markerEvent:e})},_syncCircleRadius(){const e=this._centerMarker.getLatLng(),t=this._outerMarker.getLatLng(),r=e.distanceTo(t);this._layer.setRadius(r)},_syncHintLine(){const e=this._centerMarker.getLatLng(),t=this._outerMarker.getLatLng();this._hintline.setLatLngs([e,t])},_createHintLine(e,t){const r=e.getLatLng(),n=t.getLatLng();this._hintline=L.polyline([r,n],this.options.hintlineStyle),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline)},_createCenterMarker(e){const t=this._createMarker(e);return t.on("move",this._moveCircle,this),t},_createOuterMarker(e){const t=this._createMarker(e);return this.options.preventVertexEdit&&t.dragging.disable(),t.on("move",this._resizeCircle,this),t},_createMarker(e){const t=new L.Marker(e,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return t._origLatLng=e,t._pmTempLayer=!0,t.on("dragstart",this._onMarkerDragStart,this),t.on("dragend",this._onMarkerDragEnd,this),this._layerGroup.addLayer(t),t},_fireEdit(){this._layer.fire("pm:edit"),this._layerEdited=!0}})},function(e,t){},function(e,t){}]);